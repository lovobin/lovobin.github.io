<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Python-基础 | 源于此</title><meta name="keywords" content="Python,Python-基础"><meta name="author" content="源于此"><meta name="copyright" content="源于此"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Python-基础12345# 生成文件 pip freeze &gt; requirements.txt# 依赖项安装: pip install -r requirements.txt    1. 格式化输出 format1234567891011121314person_name &#x3D; &amp;#x27;张三&amp;#x27;person_age &#x3D; 18person_sex &#x3D; &amp;#x27;男&amp;#x27;"><meta property="og:type" content="article"><meta property="og:title" content="Python-基础"><meta property="og:url" content="https://lovobin.github.io/2021/01/03/Python-%E5%9F%BA%E7%A1%80/index.html"><meta property="og:site_name" content="源于此"><meta property="og:description" content="Python-基础12345# 生成文件 pip freeze &gt; requirements.txt# 依赖项安装: pip install -r requirements.txt    1. 格式化输出 format1234567891011121314person_name &#x3D; &amp;#x27;张三&amp;#x27;person_age &#x3D; 18person_sex &#x3D; &amp;#x27;男&amp;#x27;"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.6/bbg/09.jpg"><meta property="article:published_time" content="2021-01-03T16:27:23.000Z"><meta property="article:modified_time" content="2021-03-17T05:10:00.426Z"><meta property="article:author" content="源于此"><meta property="article:tag" content="Python"><meta property="article:tag" content="Python-基础"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.6/bbg/09.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://lovobin.github.io/2021/01/03/Python-%E5%9F%BA%E7%A1%80/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="yandex-verification" content="{&quot;theme_color&quot;:{&quot;enable&quot;:true,&quot;main&quot;:&quot;#49B1F5&quot;,&quot;paginator&quot;:&quot;#00c4b6&quot;,&quot;button_hover&quot;:&quot;#FF7242&quot;,&quot;text_selection&quot;:&quot;#00c4b6&quot;,&quot;link_color&quot;:&quot;#99a9bf&quot;,&quot;meta_color&quot;:&quot;#858585&quot;,&quot;hr_color&quot;:&quot;#A4D8FA&quot;,&quot;code_foreground&quot;:&quot;#F47466&quot;,&quot;code_background&quot;:&quot;rgba(27, 31, 35, .05)&quot;,&quot;toc_color&quot;:&quot;#00c4b6&quot;,&quot;blockquote_padding_color&quot;:&quot;#49b1f5&quot;,&quot;blockquote_background_color&quot;:&quot;#49b1f5&quot;}}"><link rel="manifest" href="/image/pwa/manifest.json"><link rel="apple-touch-icon" sizes="180x180" href="/image/pwa/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/image/pwa/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/image/pwa/16.png"><link rel="mask-icon" href="/image/pwa/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2021-03-17 05:10:00"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lovobin/FileJsDeliver@v1.1.12/css/gitcalendar.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lovobin/FileJsDeliver@v1.1.13/swiper/swiper.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lovobin/FileJsDeliver@v1.1.13/swiper/swiperstyle.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/animate-css/animate.css@3.7.2/animate.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css" media="defer"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="源于此" type="application/atom+xml"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="https://gitee.com/wang_hong_bin/pic-go-photos/raw/master/avatar.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">121</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">64</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">27</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/Timeline/"><i class="fa-fw fab fa-docker"></i> <span>日志</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fab fa-d-and-d"></i> <span>说说</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.6/bbg/09.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">源于此</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/Timeline/"><i class="fa-fw fab fa-docker"></i> <span>日志</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fab fa-d-and-d"></i> <span>说说</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Python-基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-01-03T16:27:23.000Z" title="发表于 2021-01-03 16:27:23">2021-01-03</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-17T05:10:00.426Z" title="更新于 2021-03-17 05:10:00">2021-03-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/">Python</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="Python-基础"><a href="#Python-基础" class="headerlink" title="Python-基础"></a>Python-基础</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 生成文件 pip freeze &gt; requirements.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 依赖项安装: pip install -r requirements.txt</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="1-格式化输出-format"><a href="#1-格式化输出-format" class="headerlink" title="1. 格式化输出 format"></a>1. 格式化输出 <code>format</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">person_name = <span class="string">&#x27;张三&#x27;</span></span><br><span class="line"></span><br><span class="line">person_age = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">person_sex = <span class="string">&#x27;男&#x27;</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    姓名: &#123;&#125;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    年龄: &#123;&#125;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    性别: </span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>.<span class="built_in">format</span>(person_name, person_age, person_sex))</span><br></pre></td></tr></table></figure><h4 id="2-s"><a href="#2-s" class="headerlink" title="2. %s"></a>2. <code>%s</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">person_name = <span class="string">&#x27;张三&#x27;</span></span><br><span class="line"></span><br><span class="line">person_age = <span class="string">&#x27;18&#x27;</span></span><br><span class="line"></span><br><span class="line">person_sex = <span class="string">&#x27;男&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;姓名:%s 年龄:%s 性别:%s&#x27;</span>%(person_name,person_age,person_sex))</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-input输入"><a href="#3-input输入" class="headerlink" title="3. input输入"></a>3. <code>input</code>输入</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># input</span></span><br><span class="line"></span><br><span class="line">name = <span class="built_in">input</span>(<span class="string">&#x27;请输入 python: &#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;学习语言: &#x27;</span>+name)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-进制转换"><a href="#4-进制转换" class="headerlink" title="4. 进制转换"></a>4. 进制转换</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><h4 id="5-三目运算符"><a href="#5-三目运算符" class="headerlink" title="5. 三目运算符"></a>5. 三目运算符</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 三目运算符</span></span><br><span class="line">a = <span class="number">4</span></span><br><span class="line">b = <span class="number">6</span></span><br><span class="line">result = a + b <span class="keyword">if</span> a &lt; b <span class="keyword">else</span> b - a</span><br><span class="line"><span class="comment"># 10 </span></span><br><span class="line">print(result) </span><br></pre></td></tr></table></figure><h4 id="6-if-语句"><a href="#6-if-语句" class="headerlink" title="6. if 语句"></a>6. <code>if</code> 语句</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># if</span></span><br><span class="line">a = <span class="number">10</span></span><br><span class="line">b = <span class="number">30</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> a&gt;b:</span><br><span class="line">    print(a)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(b)</span><br><span class="line">   </span><br></pre></td></tr></table></figure><h4 id="7-for-循环"><a href="#7-for-循环" class="headerlink" title="7.  for 循环"></a>7. <code>for</code> 循环</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用系统 range 指定范围</span></span><br><span class="line">arr = [<span class="string">&#x27;a&#x27;</span>,<span class="number">1</span>,&#123;<span class="string">&#x27;value&#x27;</span>:<span class="string">&#x27;bin&#x27;</span>&#125;]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(arr)):</span><br><span class="line">    print(arr[i])</span><br><span class="line"></span><br><span class="line">-------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出 3 遍 hello world</span></span><br><span class="line"><span class="keyword">for</span> ia <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    print(<span class="string">&#x27;Hello world&#x27;</span>)</span><br><span class="line"></span><br><span class="line">-------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment"># 九九乘法口诀表</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, i+<span class="number">1</span>):</span><br><span class="line">        print(<span class="string">&#x27;&#123;&#125;x&#123;&#125;=&#123;&#125;\t&#x27;</span>.<span class="built_in">format</span>(j, i, i*j), end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    print()</span><br><span class="line">    </span><br></pre></td></tr></table></figure><h4 id="8-for-else结构"><a href="#8-for-else结构" class="headerlink" title="8. for else结构"></a>8. <code>for else</code>结构</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pass 空语句</span></span><br></pre></td></tr></table></figure><h4 id="9-while循环"><a href="#9-while循环" class="headerlink" title="9. while循环"></a>9. <code>while</code>循环</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> n&lt;=<span class="number">30</span>:</span><br><span class="line">    <span class="keyword">if</span> n%<span class="number">3</span>==<span class="number">0</span> <span class="keyword">and</span> n%<span class="number">5</span>==<span class="number">0</span>:</span><br><span class="line">        print(<span class="string">&#x27;----------------&gt;&#x27;</span>,n)</span><br><span class="line">    n+=<span class="number">1</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># python 独有方法</span></span><br><span class="line">ceng = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> ceng&lt;=<span class="number">5</span>:</span><br><span class="line">    print(<span class="string">&#x27;*&#x27;</span>*ceng)</span><br><span class="line">    </span><br><span class="line">    ceng+=<span class="number">1</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 逻辑</span></span><br><span class="line">ceng = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> ceng &lt;= <span class="number">5</span>:</span><br><span class="line">    count = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> count &lt;= ceng:</span><br><span class="line">        print(<span class="string">&#x27;*&#x27;</span>,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">    print()</span><br><span class="line">    ceng += <span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="10-字符串"><a href="#10-字符串" class="headerlink" title="10. 字符串"></a>10. 字符串</h4><ul><li><p>常量</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="string">&#x27;abc&#x27;</span></span><br><span class="line">s2 = <span class="string">&quot;abc&quot;</span></span><br><span class="line">s3 = <span class="string">&#x27;&#x27;&#x27;abc&#x27;&#x27;&#x27;</span></span><br><span class="line">print(<span class="built_in">id</span>(s1),<span class="built_in">id</span>(s2),<span class="built_in">id</span>(s3))</span><br><span class="line"></span><br><span class="line">s1: <span class="number">2128137317424</span></span><br><span class="line">s2: <span class="number">2128137317424</span> </span><br><span class="line">s3: <span class="number">2128137317424</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 三引号占用的内存空间与单双引号不同</span></span><br><span class="line"></span><br><span class="line">print(s1==s2) <span class="comment"># 比较的是内容 True</span></span><br><span class="line">print(s1 <span class="keyword">is</span> s2) <span class="comment"># 比较的是地址 True</span></span><br></pre></td></tr></table></figure></li><li><p>变量</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="built_in">input</span>(<span class="string">&#x27;请输入:&#x27;</span>)</span><br><span class="line">s2 = <span class="built_in">input</span>(<span class="string">&#x27;请输入:&#x27;</span>)</span><br><span class="line">print(s1==s2) <span class="comment"># True</span></span><br><span class="line">print(s1 <span class="keyword">is</span> s2) <span class="comment"># False ,常量是True， input()底层做了处理，所以最后地址是不一样的</span></span><br></pre></td></tr></table></figure></li><li><p>切片使用</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">filename = <span class="string">&#x27;picture.png&#x27;</span></span><br><span class="line"></span><br><span class="line">filename[<span class="number">5</span>] <span class="comment"># 从0 开始 取第 5 位</span></span><br><span class="line"></span><br><span class="line">filename[<span class="number">0</span>:<span class="number">5</span>] <span class="comment"># 取出 5 位</span></span><br><span class="line"></span><br><span class="line">filename[::-<span class="number">1</span>] <span class="comment"># 倒叙输出</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>字符串的内置方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 大小写相关</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;abc bb&#x27;</span></span><br><span class="line">print(<span class="built_in">str</span>.capitalize()) <span class="comment"># 首字母大写 Abc bb</span></span><br><span class="line">print(<span class="built_in">str</span>.title()) <span class="comment">#  单词的每个首字母大写 Abc Bb</span></span><br><span class="line">print(<span class="built_in">str</span>.upper()) <span class="comment"># 所有字母大写 ABC BB</span></span><br><span class="line">print(<span class="built_in">str</span>.lower()) <span class="comment"># 所有字母小写  abc bb</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>随机数应用(验证码)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 验证码案例</span></span><br><span class="line">code = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line">s = <span class="string">&#x27;QWERTYUIOPASDFGHJKLZXCBN&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    ran = random.randint(<span class="number">1</span>, <span class="built_in">len</span>(s) - <span class="number">1</span>)</span><br><span class="line">    code += s[ran]</span><br><span class="line">print(code)</span><br><span class="line">user_input = <span class="built_in">input</span>(<span class="string">&#x27;请输入验证码: &#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> user_input.lower() == code.lower():</span><br><span class="line">    print(<span class="string">&#x27;验证码输入正确&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">&#x27;验证码输入错误&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>查找相关的</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># find()  rfind() lfind() index rindex() replace()</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;abcd&#x27;</span></span><br><span class="line">print(<span class="built_in">str</span>.find(<span class="string">&#x27;e&#x27;</span>)) <span class="comment"># 找不见返回 -1 ,找见输出起始位置</span></span><br><span class="line">print(<span class="built_in">str</span>.rfind(<span class="string">&#x27;e&#x27;</span>)) <span class="comment"># 找不见返回 -1 ,找见输出起始位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># index() 找不见报异常</span></span><br><span class="line"><span class="comment"># ValueError: substring not found</span></span><br><span class="line">      </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rfind()</span></span><br><span class="line">x = path.rfind(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">filename = path[x+<span class="number">1</span>::]</span><br><span class="line">print(filename)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># replace()</span></span><br><span class="line"></span><br><span class="line">replace(old,new[,<span class="built_in">max</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将空格替换为 # 号</span></span><br><span class="line">s1 = <span class="string">&#x27;indec lucy luks gooes&#x27;</span></span><br><span class="line">s2 = s1.replace(<span class="string">&#x27; &#x27;</span>,<span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">print(s2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定替换的做大次数</span></span><br><span class="line">s2 = s1.replace(<span class="string">&#x27; &#x27;</span>,<span class="string">&#x27;#&#x27;</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure></li><li><p>编码相关</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encode 编码</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># decode 解码</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解码编码</span></span><br><span class="line">msg = <span class="string">&#x27;人生苦短,我学 Python&#x27;</span></span><br><span class="line"><span class="comment"># encode(&#x27;指定编码&#x27;) decode(&#x27;&#x27;)</span></span><br><span class="line">result = msg.encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">decode =result.decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">print(decode)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>endswith() startwith()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">应用: 文件上传 只能上传(jpg，png,bmp,gif)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 返回值都是布尔类型 True False  </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># endswith() </span></span><br><span class="line">filename = <span class="string">&#x27;python.png&#x27;</span></span><br><span class="line">result = filename.endswith(<span class="string">&#x27;png&#x27;</span>) <span class="comment">#  filename 是否以 png 结尾</span></span><br><span class="line">print(result) <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># startwith() </span></span><br><span class="line">s = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">result = s.startswith(<span class="string">&#x27;he&#x27;</span>) <span class="comment"># 判断是否以 he 开头</span></span><br><span class="line">print(result) <span class="comment"># True </span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>join</code>使用</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># join</span></span><br><span class="line">new_str = <span class="string">&#x27;_&#x27;</span>.join(<span class="string">&#x27;abc&#x27;</span>) <span class="comment"># 用符号连接字符串</span></span><br><span class="line">print(new_str) <span class="comment"># a_b_c</span></span><br></pre></td></tr></table></figure></li><li><p>去除左右空格</p><ul><li><p>去除左边空格</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 去除左空格</span></span><br><span class="line">s = <span class="string">&#x27;   hello &#x27;</span></span><br><span class="line">s = s.lstrip()</span><br><span class="line">print(s+<span class="string">&#x27;1&#x27;</span>) <span class="comment"># hello  1</span></span><br></pre></td></tr></table></figure></li><li><p>去除右边空格</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 去除右空格</span><br><span class="line">s &#x3D; &#39;   hello &#39;</span><br><span class="line">s &#x3D; s.rstrip()</span><br><span class="line">print(&#39;a&#39;+s+&#39;1&#39;) # a   hello1</span><br></pre></td></tr></table></figure></li><li><p>去除左右两边的空格</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 同时去除空格</span></span><br><span class="line">s = <span class="string">&#x27;   hello  &#x27;</span></span><br><span class="line">s = s.strip()</span><br><span class="line">print(<span class="string">&#x27;a&#x27;</span>+s+<span class="string">&#x27;1&#x27;</span>) <span class="comment"># ahello1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li><li><p>分割字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># split(&#x27;指定字符切割&#x27;,&#x27;分割次数 int &#x27;)</span></span><br><span class="line">s = <span class="string">&#x27;hello world hello kitty&#x27;</span></span><br><span class="line">result = s.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 结果是 列表</span></span><br><span class="line"><span class="comment"># [&#x27;hello&#x27;, &#x27;world&#x27;, &#x27;hello&#x27;, &#x27;kitty&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p>求取定个数(统计)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&#x27;aaaaaaaaa&#x27;</span></span><br><span class="line">s.count(<span class="string">&#x27;s&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ul><h4 id="11-列表"><a href="#11-列表" class="headerlink" title="11. 列表"></a>11. 列表</h4><ul><li><p>遍历列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(movies)):</span><br><span class="line">    print(movies[i])</span><br></pre></td></tr></table></figure></li><li><p>修改列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">branch = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"></span><br><span class="line">branch[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">print(branch) <span class="comment"># [0, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure></li><li><p>列表元素删除</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> branch[<span class="number">0</span>]</span><br><span class="line">print(branch)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除相关</span></span><br><span class="line">remove()</span><br><span class="line">pop()</span><br><span class="line">clear()</span><br></pre></td></tr></table></figure></li><li><p>列表的切片操作</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">branch[<span class="number">1</span>::]</span><br><span class="line">print(branch[<span class="number">1</span>::])</span><br></pre></td></tr></table></figure></li><li><p>列表的函数使用</p><ul><li><p><code>append()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># append() 末尾追加</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>extend()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># extend() </span></span><br><span class="line"></span><br><span class="line">	+、  extends() 列表的合并</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>insert()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">指定位置插入</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li><li><p>列表的排序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">100</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">20</span>,<span class="number">45</span>,<span class="number">11</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认升序</span></span><br><span class="line"><span class="built_in">sorted</span>(列表)</span><br><span class="line"><span class="comment"># print(sorted(a)) [1, 5, 11, 20, 45, 100]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 翻转</span></span><br><span class="line"><span class="built_in">sorted</span>(a, reverse=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># print(sorted(a, reverse=True)) [100, 45, 20, 11, 5, 1]</span></span><br></pre></td></tr></table></figure></li><li><p>冒泡排序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p>选择排序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li></ul><h4 id="12-元组"><a href="#12-元组" class="headerlink" title="12 . 元组"></a>12 . 元组</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">特点: </span><br><span class="line">    <span class="number">1.</span> 定义的符号: ()</span><br><span class="line">    <span class="number">2.</span> 元组中的内容不可修改</span><br><span class="line">    <span class="number">3.</span> 关键字: <span class="built_in">tuple</span></span><br><span class="line">    </span><br><span class="line">    只能执行 查 的操作</span><br><span class="line">    </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>  random</span><br><span class="line">list1 = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    ran = random.randint(<span class="number">1</span>,<span class="number">20</span>)</span><br><span class="line">    list1.append(ran)</span><br><span class="line">print(list1)</span><br><span class="line">t = <span class="built_in">tuple</span>(list1)</span><br><span class="line">print(t)</span><br><span class="line"></span><br><span class="line">[<span class="number">3</span>, <span class="number">9</span>, <span class="number">18</span>, <span class="number">17</span>, <span class="number">7</span>, <span class="number">19</span>, <span class="number">8</span>, <span class="number">14</span>, <span class="number">7</span>, <span class="number">15</span>]</span><br><span class="line">(<span class="number">3</span>, <span class="number">9</span>, <span class="number">18</span>, <span class="number">17</span>, <span class="number">7</span>, <span class="number">19</span>, <span class="number">8</span>, <span class="number">14</span>, <span class="number">7</span>, <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用列表进行增删改查</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="13-字典"><a href="#13-字典" class="headerlink" title="13. 字典"></a>13. 字典</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 空字典 dict1 = dict()</span></span><br><span class="line"><span class="comment"># 空列表 list1 = list()</span></span><br><span class="line"><span class="comment"># 空元组 tuple1 = tuple()</span></span><br><span class="line"><span class="built_in">dict</span> = &#123;&#125;</span><br></pre></td></tr></table></figure><ul><li><p>增加</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span>[key] = value;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 同名则为修改</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>删除</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> 字典名[key]</span><br><span class="line"></span><br><span class="line">对应的函数:</span><br><span class="line">    字典名.remove(<span class="string">&#x27;key&#x27;</span>) <span class="comment"># 没有报错</span></span><br><span class="line">    字典名.pop(<span class="string">&#x27;key&#x27;</span>)</span><br><span class="line">    字典名.clear()</span><br><span class="line">    字典名.popitem()</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">注意:</span><br><span class="line">    pop([key,default])</span><br><span class="line">    根据 key 删除字典中的键值对,返回值是 只要删除成功，怎返回键值对的值 value</span><br><span class="line">    pop 的默认值,往往是在删除的时候没有找到对应的 key ，则返回 default 默认值</span><br><span class="line">    </span><br><span class="line">    popitem(): 随机删除字典中键值对(一般都是从末尾删除元素)</span><br><span class="line">        </span><br></pre></td></tr></table></figure></li><li><p>修改</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 同名则为修改</span></span><br></pre></td></tr></table></figure></li><li><p>查询</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dict</span>[key]</span><br></pre></td></tr></table></figure></li><li><p>字典的拼接</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update() </span><br></pre></td></tr></table></figure> <img src="https://cdn.jsdelivr.net/gh/lovobin/FileJsDeliver@v1.1.13/gif/3.gif" data-lazy-src="https://gitee.com/wang_hong_bin/pic-go-photos/raw/master/20210104101610.png"></li></ul><ul><li><p>形式转换</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fromkeys(seq)</span><br><span class="line"></span><br><span class="line">将 seq 转成字典的形式,如果没有指定默认的 value 则用 <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">list1 = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"></span><br><span class="line">new_dict = <span class="built_in">dict</span>.fromkeys(list1);</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h4 id="14-集合"><a href="#14-集合" class="headerlink" title="14. 集合"></a>14. 集合</h4><ul><li><p>关键字</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">集合: <span class="built_in">set</span> 关键字 无序不重复的元素</span><br><span class="line">    </span><br><span class="line">作用: 不重复的特点</span><br><span class="line">    </span><br></pre></td></tr></table></figure></li><li><p>声明集合</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span>() <span class="comment"># 创建空集合,只能使用 set()</span></span><br></pre></td></tr></table></figure></li><li><p>应用</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">newList = <span class="built_in">set</span>(list1)</span><br><span class="line">print(newList) <span class="comment"># &#123;1, 2, 3, 4&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>增</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="built_in">set</span>()</span><br><span class="line"><span class="comment"># 增</span></span><br><span class="line"><span class="comment"># 增加一个</span></span><br><span class="line">    s1.add(<span class="string">&#x27;add-01&#x27;</span>)</span><br><span class="line">    s1.add(<span class="string">&#x27;add-02&#x27;</span>)</span><br><span class="line">    s1.add(<span class="string">&#x27;add-03&#x27;</span>)</span><br><span class="line">    print(s1) <span class="comment"># &#123;&#x27;add-03&#x27;, &#x27;add-01&#x27;, &#x27;add-02&#x27;&#125;</span></span><br><span class="line"><span class="comment"># 增加多个</span></span><br><span class="line">	update()</span><br><span class="line">    t1 = (<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">    s1.update(t1)</span><br><span class="line">    print(s1) <span class="comment"># 输出无序</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>删</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">remove() <span class="comment"># 存在删除,没有报错 keyValue</span></span><br><span class="line">pop() <span class="comment"># 随机删除,在集合中删除第一个</span></span><br><span class="line">clear() <span class="comment"># 清空</span></span><br><span class="line"></span><br><span class="line">dicard() <span class="comment"># 类似remove() 在移除没有元素不报错</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>改</p></li><li><p>查</p></li><li><p>可变和不可变</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">不可变: 对象指向的内存中的值是不可以改变</span><br><span class="line">    </span><br><span class="line">不可变的类型: <span class="built_in">int</span> <span class="built_in">str</span> <span class="built_in">float</span> 元组<span class="built_in">tuple</span></span><br><span class="line">    </span><br><span class="line">----------------------------------------------    </span><br><span class="line">    </span><br><span class="line">可变的； 对象所指向的内存中的值是可以改变的</span><br><span class="line"></span><br><span class="line">可变类型: 字典<span class="built_in">dict</span>  列表<span class="built_in">list</span></span><br><span class="line">    </span><br><span class="line">   </span><br></pre></td></tr></table></figure></li><li><p>类型转换</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span>()  <span class="built_in">int</span>()  <span class="built_in">list</span>()  <span class="built_in">dict</span>()  <span class="built_in">set</span>()  <span class="built_in">tuple</span>()</span><br></pre></td></tr></table></figure><ul><li><p><code>str</code>可转类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> <span class="built_in">list</span> <span class="built_in">set</span> <span class="built_in">tuple</span></span><br><span class="line"></span><br><span class="line">----------------------------  str--&gt; int  --------------------</span><br><span class="line"></span><br><span class="line">s = <span class="string">&#x27;1234&#x27;</span> <span class="comment"># 字符串类型</span></span><br><span class="line">i = <span class="built_in">int</span>(s) <span class="comment"># 字符串转换为数字</span></span><br><span class="line">print(<span class="built_in">type</span>(i)) <span class="comment"># &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line">-----------------------------  str--&gt; list --------------------</span><br><span class="line">list1 = <span class="built_in">list</span>(s)</span><br><span class="line">print(list1) <span class="comment"># [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;]</span></span><br><span class="line"></span><br><span class="line">-----------------------------  str--&gt; set --------------------</span><br><span class="line"></span><br><span class="line">set1 = <span class="built_in">set</span>(s)</span><br><span class="line">print(set1) <span class="comment"># &#123;&#x27;3&#x27;, &#x27;4&#x27;, &#x27;1&#x27;, &#x27;2&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line">-----------------------------  str--&gt; tuple --------------------</span><br><span class="line">tupl1 = <span class="built_in">tuple</span>(s)</span><br><span class="line">print(tupl1) <span class="comment"># (&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>list</code>可转类型</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span>()  <span class="built_in">tuple</span>() 可以转换成字典 [(key,value),()···]</span><br></pre></td></tr></table></figure></li><li><p><code>dict可转类型</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span></span><br></pre></td></tr></table></figure></li><li><p><code>tuple可转类型</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span></span><br></pre></td></tr></table></figure></li><li><p><code>set可转类型</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="15-函数"><a href="#15-函数" class="headerlink" title="15. 函数"></a>15. 函数</h4><ul><li><p>函数简介</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">作用: 将重复的代码,封装到函数,只要使用直接找函数 函数可以增强代码的模块化和提高代码的重复利用率</span><br><span class="line">    </span><br><span class="line">格式:</span><br><span class="line">    <span class="function"><span class="keyword">def</span> 函数名:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li><li><p>拆包装包</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">装包: 把传递的参数,包装成一个集合,称之为“装包”</span><br><span class="line">    </span><br><span class="line">拆包: 把集合参数,再次分解成单独的个体,称之为<span class="string">&quot;拆包&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 封装一个求和函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">*args</span>):</span></span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(args) &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> args:</span><br><span class="line">            <span class="built_in">sum</span> += i</span><br><span class="line">        print(<span class="built_in">sum</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">&#x27;没有元素可以计算&#x27;</span>)</span><br><span class="line">add()</span><br><span class="line">add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">注意: 可变参数必须放在后面</span><br></pre></td></tr></table></figure></li><li><p>关键字参数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关键字参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a,b=<span class="number">1</span></span>):</span></span><br><span class="line">    print(a+b)</span><br><span class="line">add(<span class="number">1</span>,<span class="number">2</span>) <span class="comment"># 3  b=1 相当于默认值，后来的值会将其覆盖</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可变 值必须是 key=value</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">**args</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">调用函数时有 ** 叫拆包</span><br><span class="line"></span><br><span class="line">定义时有 ** 叫装包</span><br><span class="line"></span><br><span class="line">应用:</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bb</span>(<span class="params">a, b, *c, **d</span>):</span></span><br><span class="line">        print(a, b, c, d)</span><br><span class="line"></span><br><span class="line">    bb(<span class="number">1</span>, <span class="number">2</span>)  <span class="comment"># 1 2 () &#123;&#125;</span></span><br><span class="line">    bb(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)  <span class="comment"># 1 2 (3, 4) &#123;&#125;</span></span><br><span class="line">    bb(<span class="number">1</span>, <span class="number">2</span>, x=<span class="number">100</span>, y=<span class="number">20</span>)  <span class="comment"># 1 2 () &#123;&#x27;x&#x27;: 100, &#x27;y&#x27;: 20&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>函数的返回值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">有 <span class="keyword">return</span> 需要用变量接受</span><br></pre></td></tr></table></figure></li><li><p><code>global</code>问题</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">函数内部声明的变量,局部变量</span><br><span class="line"></span><br><span class="line">声明在函数外侧的变量是全局变量</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span>():</span></span><br><span class="line">    <span class="keyword">global</span> name <span class="comment"># 不修改全局变量,只是获取打印,但是如果要发生修改全局变量,则要在函数内部声明, global 变量名</span></span><br><span class="line">    </span><br><span class="line">全局变量如果是不可变在函数中进行修改需要添加 <span class="keyword">global</span> 关键字</span><br><span class="line">如果全局变量是可变的,在函数中修改的时候就不需要添加 <span class="keyword">global</span> </span><br></pre></td></tr></table></figure></li><li><p>嵌套函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>():</span></span><br><span class="line">    <span class="comment"># 声明变量</span></span><br><span class="line">    n = <span class="number">100</span>  <span class="comment"># 局部变量</span></span><br><span class="line">    list1 = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">45</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 声明内部函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner_func</span>():</span></span><br><span class="line">        <span class="keyword">nonlocal</span> n <span class="comment"># 内部函数修改局部变量需要使用 nonlocal</span></span><br><span class="line">        <span class="comment"># 对 list1 的元素进行 +5 操作</span></span><br><span class="line">        <span class="keyword">for</span> index, i <span class="keyword">in</span> <span class="built_in">enumerate</span>(list1):</span><br><span class="line">            list1[index] = i + n</span><br><span class="line">        list1.sort()</span><br><span class="line">        print(list1)  <span class="comment">#  [102, 103, 105, 145]</span></span><br><span class="line">    inner_func()</span><br><span class="line">func()</span><br><span class="line"></span><br><span class="line">内部函数的特点:</span><br><span class="line">    <span class="number">1.</span> 可以访问外部函数的变量</span><br><span class="line">    <span class="number">2.</span> 内部函数可以修改外部函数的可变类型的变量 比如: list1</span><br><span class="line">    <span class="number">3.</span> 内部函数修改全局的不可变变量时,需要在内部函数声明 <span class="keyword">global</span> 变量名</span><br><span class="line">    内部函数修改外部函数的不可变的变量时,需要在内部函数中声明； <span class="keyword">nonlocal</span> 变量名</span><br><span class="line">  	<span class="number">4.</span> <span class="built_in">locals</span>() 查看本地变量有哪些,以字典的形式输出</span><br><span class="line">    <span class="built_in">globals</span>() 可以查看全局变量有那些,以字典的形式输出(会出系统的一些键值对)</span><br></pre></td></tr></table></figure></li></ul><h4 id="16-闭包"><a href="#16-闭包" class="headerlink" title="16. 闭包"></a>16. 闭包</h4><ul><li><p>闭包的概念</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在函数中提出的概念</span><br></pre></td></tr></table></figure></li><li><p>条件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 外部函数中定义了内部函数</span><br><span class="line"><span class="number">2.</span> 外部函数是有返回值</span><br><span class="line"><span class="number">3.</span> 返回值是: 内部函数域名</span><br><span class="line"><span class="number">4.</span> 内部函数引用了外部函数的变量</span><br><span class="line"></span><br><span class="line">语法格式:</span><br><span class="line">    <span class="function"><span class="keyword">def</span> 外部函数():</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    	<span class="function"><span class="keyword">def</span> 内部函数():</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">return</span> 内部函数名</span><br></pre></td></tr></table></figure></li><li><p>闭包的应用</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p>闭包的缺点</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">闭包的缺点: </span><br><span class="line">    <span class="number">1.</span> 作用域没有那么直观</span><br><span class="line">    <span class="number">2.</span> 因为变量不会被垃圾回收所以有一定的内存占用问题</span><br></pre></td></tr></table></figure></li><li><p>闭包的作用</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">闭包的作用: </span><br><span class="line">    <span class="number">1.</span> 可以使用同级的作用域</span><br><span class="line">    <span class="number">2.</span> 读取其他元素的内部变量</span><br><span class="line">    <span class="number">3.</span> 延长作用域</span><br></pre></td></tr></table></figure></li><li><p>闭包的总结</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">总结:</span><br><span class="line">    <span class="number">1.</span> 闭包似优化了变量,原来需要类对象完成工作,闭包也可以完成</span><br><span class="line">    <span class="number">2.</span> 由于闭包引用；额外部函数的局部变量,则外部函数的局部变量没有及时释放,消耗内存</span><br><span class="line">    <span class="number">3.</span> 闭包的好处,使代码变得简洁,便于阅读代码</span><br><span class="line">    <span class="number">4.</span> 闭包是理解装饰器的基础</span><br></pre></td></tr></table></figure></li></ul><h4 id="17-装饰器-重点"><a href="#17-装饰器-重点" class="headerlink" title="17. 装饰器(重点)"></a>17. 装饰器(重点)</h4><ul><li><p>装饰器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">特点: </span><br><span class="line">    <span class="number">1.</span> 函数 A 是作为参数出现的(函数B就会接受函数A作为参数)</span><br><span class="line">    <span class="number">2.</span> 要有闭包的特点</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 定义一个装饰器 (含有闭包特点)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorate</span>(<span class="params">func</span>):</span></span><br><span class="line">    a = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>():</span></span><br><span class="line">        print(<span class="string">&#x27;----------------------&gt; 内部函数 输出&#x27;</span>)</span><br><span class="line">        func()</span><br><span class="line">        print(<span class="string">&#x27;----------------------- 111111111111112222222222222&#x27;</span>, a)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用装饰器</span></span><br><span class="line"><span class="meta">@decorate</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">house</span>():</span></span><br><span class="line">    print(<span class="string">&#x27;我是毛坯房······················&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用函数</span></span><br><span class="line">house()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>带参数的装饰器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*args,**kwargs 作为参数传递</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">如果装饰器是多层的,谁距离函数最近就优先使用那个装饰器</span><br></pre></td></tr></table></figure></li></ul><h4 id="18-匿名函数"><a href="#18-匿名函数" class="headerlink" title="18. 匿名函数"></a>18. 匿名函数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a,b</span>):</span></span><br><span class="line">    <span class="keyword">return</span> a+b</span><br><span class="line">f = add</span><br><span class="line"></span><br><span class="line">s = <span class="keyword">lambda</span> a,b:a+b</span><br><span class="line"></span><br><span class="line">result = s(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure> <img src="https://cdn.jsdelivr.net/gh/lovobin/FileJsDeliver@v1.1.13/gif/3.gif" data-lazy-src="https://gitee.com/wang_hong_bin/pic-go-photos/raw/master/20210104145533.png"><ul><li><p>匿名函数作为参数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p><code>map()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">6</span>]</span><br><span class="line">result = <span class="built_in">map</span>(<span class="keyword">lambda</span> x:x <span class="keyword">if</span> x%<span class="number">2</span>==<span class="number">0</span> eldr x+<span class="number">1</span>,list1)</span><br><span class="line">print(<span class="built_in">list</span>(result))</span><br></pre></td></tr></table></figure></li><li><p><code>reduce()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对列表中的元素进行加减乘除运算的函数</span><br></pre></td></tr></table></figure></li><li><p><code>filter()</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 过滤出 大于 10 的数子</span></span><br><span class="line">list1 = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">19</span>]</span><br><span class="line">result = <span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x &gt; <span class="number">10</span>, list1)</span><br><span class="line">print(<span class="built_in">list</span>(result))</span><br></pre></td></tr></table></figure></li><li><p>递归函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">普通函数: <span class="function"><span class="keyword">def</span> <span class="title">func</span>():</span> <span class="keyword">pass</span></span><br><span class="line">匿名函数: <span class="keyword">lambda</span> 参数: 返回结果</span><br><span class="line">递归函数: 普通函数的一种表现形式</span><br></pre></td></tr></table></figure></li></ul><h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><ul><li><p>文件操作</p><ul><li><p>文件读取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># 以 txt 文件练习  其他读取 有 gbk 错误</span></span><br><span class="line"><span class="comment"># 读取路径 print(os.getcwd()) D:\python就业视频\python基础</span></span><br><span class="line">stream = <span class="built_in">open</span>(<span class="string">r&#x27;D:\python就业视频\python基础\hello.txt&#x27;</span>)</span><br><span class="line">container = stream.read()</span><br><span class="line">txt = stream.readable()  <span class="comment"># 判断文件是否可读  True</span></span><br><span class="line">readLine = stream.readline()  <span class="comment"># 读取一行</span></span><br><span class="line">lines = stream.readlines()  <span class="comment"># 读取多行</span></span><br><span class="line">print(container, txt, readLine)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>文件写入</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mode = &#x27;a&#x27; </span></span><br><span class="line">stream = <span class="built_in">open</span>(<span class="string">r&#x27;D:\python就业视频\python基础\hello.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">print(stream.write(<span class="string">&#x27;aaaaaaaaaaaaaaaa&#x27;</span>))  <span class="comment"># 覆盖源文件</span></span><br><span class="line"></span><br><span class="line">print(stream.writelines(<span class="built_in">str</span>)) <span class="comment"># 保留源文件 追加</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>文件复制</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&#x27;D:\python就业视频\python基础\hello.txt&#x27;</span>) <span class="keyword">as</span> stream:</span><br><span class="line">    container = stream.read()  <span class="comment"># 读取文件</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&#x27;D:\python就业视频\hello.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> writeFile:</span><br><span class="line">        writeFile.write(container)</span><br><span class="line">        print(<span class="string">&#x27;文件写入&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p><code>os</code>模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 路径读取</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="异常机制"><a href="#异常机制" class="headerlink" title="异常机制"></a>异常机制</h3><ul><li><p>异常</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    可能出现异常的代码</span><br><span class="line"><span class="keyword">except</span> 类型<span class="number">1</span>:</span><br><span class="line">    如果有异常执行的代码</span><br><span class="line"><span class="keyword">except</span> 类型<span class="number">1</span>:</span><br><span class="line">    如果有异常执行的代码</span><br><span class="line">···</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    无论是否存在异常都会执行的代码</span><br></pre></td></tr></table></figure></li><li><p><code>try-except-else</code>结构:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p><code>try-finally</code>结构:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p>抛出异常(<code>126集</code>)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 抛出异常</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">refister</span>():</span></span><br><span class="line">    username = <span class="built_in">input</span>(<span class="string">&#x27;请输入用户名: &#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(username) &lt; <span class="number">6</span>:</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&#x27;我是抛出的异常···&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">&#x27;输入的用户名是: &#x27;</span> + username)</span><br><span class="line"><span class="comment"># 接受异常</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    refister()</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">    print(err)</span><br><span class="line">    print(<span class="string">&#x27;注册失败&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">&#x27;注册成功&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h3 id="列表推导式-128集"><a href="#列表推导式-128集" class="headerlink" title="列表推导式(128集)"></a>列表推导式(<code>128集</code>)</h3><ul><li><p>列表推导式</p><ul><li><p><code>[表达式 for 变量 in 旧列表]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">    </span><br></pre></td></tr></table></figure></li><li><p><code>[表达式 for 变量 in 旧列表 if 条件]</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">list1 = [<span class="number">10</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">90</span>, <span class="number">30</span>, <span class="number">60</span>]</span><br><span class="line"><span class="comment"># 取出 大于 10的数</span></span><br><span class="line">newList = [i <span class="keyword">for</span> i <span class="keyword">in</span> list1 <span class="keyword">if</span> i &gt;= <span class="number">10</span>]</span><br><span class="line">print(newList)</span><br></pre></td></tr></table></figure></li><li><p><code>if else</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dict1 = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;salary&#x27;</span>: <span class="number">5000</span>&#125;</span><br><span class="line">dict2 = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;lucy&#x27;</span>, <span class="string">&#x27;salary&#x27;</span>: <span class="number">8000</span>&#125;</span><br><span class="line">dict3 = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;jack&#x27;</span>, <span class="string">&#x27;salary&#x27;</span>: <span class="number">4500</span>&#125;</span><br><span class="line">dict4 = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;lily&#x27;</span>, <span class="string">&#x27;salary&#x27;</span>: <span class="number">3000</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># if 薪资大于 5000 加 200,低于 5000 加 500</span></span><br><span class="line"></span><br><span class="line">newList = [person[<span class="string">&#x27;salary&#x27;</span>] + <span class="number">200</span> <span class="keyword">if</span> person[<span class="string">&#x27;salary&#x27;</span>] &gt; <span class="number">5000</span> <span class="keyword">else</span> person[<span class="string">&#x27;salary&#x27;</span>] + <span class="number">500</span> <span class="keyword">for</span> person <span class="keyword">in</span> list1]</span><br><span class="line">print(newList) <span class="comment"># [5500, 8200, 5000, 3500] </span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>字典推导式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 集合推导式</span></span><br><span class="line">list1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">4</span>]</span><br><span class="line">set1 = &#123;x <span class="keyword">for</span> x <span class="keyword">in</span> list1&#125;</span><br><span class="line">print(set1) <span class="comment"># &#123;1, 2, 3, 4, 5, 6&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>集合推导式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dict1 = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;b&#x27;</span>: <span class="string">&#x27;B&#x27;</span>&#125;</span><br><span class="line">newdict = &#123;value: key <span class="keyword">for</span> key, value <span class="keyword">in</span> dict1.items()&#125;</span><br><span class="line">print(newdict) <span class="comment"># &#123;&#x27;A&#x27;: &#x27;a&#x27;, &#x27;B&#x27;: &#x27;b&#x27;&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">在 python 中,这种一边循环一边计算的机制,称为生成器: generator</span><br><span class="line"></span><br><span class="line">得到生成器的方式:</span><br><span class="line">    <span class="number">1.</span> 列表推导式</span><br><span class="line">    <span class="number">2.</span> 借助函数完成 (<span class="keyword">yield</span>)</span><br><span class="line">    </span><br><span class="line">    注意: 只要函数中出现；了 <span class="keyword">yield</span> 关键字,说明函数就不是函数,就是生成器</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">步骤:</span><br><span class="line">    <span class="number">1.</span> 定义一个函数,函数中使用 <span class="keyword">yield</span> 关键字</span><br><span class="line">    <span class="number">2.</span> 调用函数,接受调用的结果</span><br><span class="line">    <span class="number">3.</span> 得到的结果就是生成器</span><br><span class="line">    <span class="number">4.</span> 借助于 <span class="built_in">next</span>()</span><br><span class="line">    </span><br><span class="line">---------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span>():</span></span><br><span class="line">    n = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        n += <span class="number">1</span></span><br><span class="line">        <span class="keyword">yield</span> n</span><br><span class="line">g =  fun()</span><br><span class="line"><span class="comment"># next()  __next__()</span></span><br><span class="line">print(<span class="built_in">next</span>(g))</span><br></pre></td></tr></table></figure><h3 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h3><ul><li><p>面向对象</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p>类</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> 类名[(<span class="params">父类</span>)]:</span></span><br><span class="line">    属性: 特征</span><br><span class="line">    方法: 动作</span><br></pre></td></tr></table></figure></li><li><p>构造器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p>对象方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Phone</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;call············&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">phone = Phone()</span><br><span class="line"><span class="comment"># 通过对象调用的方法</span></span><br><span class="line">phone.call()</span><br></pre></td></tr></table></figure></li><li><p>类方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">特点: </span><br><span class="line">    <span class="number">1.</span> 定义需要依赖装饰器 @<span class="built_in">classmethod</span></span><br><span class="line">    <span class="number">2.</span> 类方法中参数不是一个对象,而是类</span><br><span class="line">    <span class="number">3.</span> 类方法中只可以使用类属性</span><br><span class="line">    4. 类方法中是否使用普通方法? 不能</span><br><span class="line">类方法的作用:</span><br><span class="line">    因为只能访问类属性和类方法,所以可以在对象创建之前,如果需要完成一些动作(功能)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__index__</span>(<span class="params">self,nikename</span>):</span></span><br><span class="line">        self.nikename = nikename</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;&#123;&#125;在院子里跑来跑去&#x27;</span>.<span class="built_in">format</span>(self.nikename))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;吃饭饭····&#x27;</span>)</span><br><span class="line">       <span class="comment"># self.run() # 类中方法的调用 需要通过 self.方法名()</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">cls</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;cls&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>静态方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li></ul><ul><li><p>魔术方法(参考资料:<a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhangboblogs/p/7860929.html">Python常用魔术方法</a>)</p><ul><li><p>魔术方法是什么</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">魔术方法就是一个类/对象中的方法，和普通方法唯一的不同时，普通方法需要调用！而魔术方法是在特定时刻自动触发。</span><br></pre></td></tr></table></figure></li><li><p><code>__init__</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">初始化魔术方法</span><br><span class="line"></span><br><span class="line">触发时机：初始化对象时触发（不是实例化触发，但是和实例化在一个操作中）</span><br></pre></td></tr></table></figure></li><li><p><code>__str__</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单纯打印对象名称,出来的是一个地址,地址对于开发者来说没有太大意义</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果想在打印对象名的时候能够给开发者更多一些信息量</span></span><br><span class="line"></span><br><span class="line">Eg.</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, nickname, age</span>):</span></span><br><span class="line">        self.nickname = nickname</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;姓名是: &#x27;</span> + self.nickname + <span class="string">&#x27;,年龄是: &#x27;</span> + <span class="built_in">str</span>(self.age)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">person = Person(<span class="string">&#x27;Bin&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">print(person) <span class="comment"># 姓名是: Bin,年龄是: 18</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">_str__</span><br><span class="line">触发时机: 使用 print(对象) 或者 <span class="built_in">str</span>(对象) 的时候触发</span><br><span class="line">参数: 一个self接收对象</span><br><span class="line">返回值: 必须是字符串类型</span><br><span class="line">作用: <span class="built_in">print</span>（对象时）进行操作，得到字符串，通常用于快捷操作</span><br><span class="line">注意: 无</span><br></pre></td></tr></table></figure></li><li><p><code>__new__</code>(向内存要空间–&gt; 地址)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">实例化魔术方法</span><br><span class="line">触发时机: 在实例化对象时触发</span><br><span class="line">参数: 至少一个 cls 接收当前类</span><br><span class="line">返回值: 必须返回一个对象实例</span><br><span class="line">作用: 实例化对象</span><br><span class="line">注意: 实例化对象是 Object 类底层实现，其他类继承了 Object 的 __new__ 才能够实现实例化对象。</span><br><span class="line"></span><br><span class="line">没事别碰这个魔术方法，先触发 __new__ 才会触发 __init__</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>__call_</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">调用对象的魔术方法</span><br><span class="line">触发时机: 将对象当作函数调用时触发 对象() </span><br><span class="line">参数: 至少一个self接收对象，其余根据调用时参数决定</span><br><span class="line">返回值: 根据情况而定</span><br><span class="line">作用: 可以将复杂的步骤进行合并操作，减少调用的步骤，方便使用</span><br><span class="line">注意: 无</span><br><span class="line">    </span><br></pre></td></tr></table></figure></li></ul></li><li><p>知识补充</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 对象赋值</span><br><span class="line">    p = Person()</span><br><span class="line">    p1 = p</span><br><span class="line">    说明: p 和 p1 共同指向同一个地址</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2.</span> 删除地址的引用</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">del</span> p1 删除 p1 对地址的引用</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.</span> 查看对地址的引用次数</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">import</span> sys</span><br><span class="line">    sys.getrefcount(对象名)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4.</span> 当一块空间没有了任何引用,默认执行 __del__</span><br><span class="line"></span><br><span class="line">ref = <span class="number">0</span></span><br></pre></td></tr></table></figure></li><li><p> 总结魔术方法</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">重点: __init__ , __str__</span><br><span class="line">    </span><br><span class="line">了解:</span><br><span class="line">    __new__ 作用: 开辟空间</span><br><span class="line">    __del__ 作用: 没有指针引用的时候会调用,<span class="number">99</span>%都不需要重写</span><br><span class="line">    __call__ 作用: 想不想将对象当成函数使用</span><br><span class="line">        </span><br></pre></td></tr></table></figure><ul><li><p>私有化</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">私有化</span><br><span class="line"></span><br><span class="line">封装: </span><br><span class="line">    <span class="number">1.</span> 私有化属性</span><br><span class="line">    <span class="number">2.</span> 定义公有 <span class="built_in">set</span> 和 get 方法</span><br><span class="line">    </span><br><span class="line">_ _属性: 就是将属性私有化</span><br><span class="line">    </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, age</span>):</span></span><br><span class="line">        self.__name = name</span><br><span class="line">        self.__age = age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setName</span>(<span class="params">self, name</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(name) &gt; <span class="number">0</span> <span class="keyword">and</span> <span class="built_in">len</span>(name) &lt;= <span class="number">6</span>:</span><br><span class="line">            self.__name = name</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">&#x27;名字必须是 6 位&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getName</span>(<span class="params">self, name</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;姓名:&#123;&#125;,年龄是:&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(self.__name, self.__age)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">person = Person(<span class="string">&#x27;Bin&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="comment"># 修改</span></span><br><span class="line">person.setName(<span class="string">&#x27;asasa&#x27;</span>)</span><br><span class="line">print(person)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>@property</code>装饰器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">···</span><br></pre></td></tr></table></figure></li><li><p>关联关系(以后补充)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">····</span><br></pre></td></tr></table></figure></li><li><p>继承</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">fu</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">zi</span>-1(<span class="params">fu</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">zi</span>-2(<span class="params">fu</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">注意: 可以重写 __init__</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">super</span>().__init__() <span class="comment"># 调用父类的 __init__</span></span><br></pre></td></tr></table></figure><ul><li><p>继承案例练习</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">编写一个简单的工资管理程序,系统可以管理以下四类人,工人(worker)，销售员(salesman),经理(manager)销售经理(salemanager)所有的员工都具有工号,姓名,工资等属性,有设置姓名,获取姓名,获取员工号,计算工资等</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 工人: 工人具有工作小时数和时薪的属性,工资计算方法为工作小时数 * 时薪</span><br><span class="line"><span class="number">2.</span> 销售员: 具有销售额和提成比例的属性,工资计算方法为销售额 * 提成比例</span><br><span class="line"><span class="number">3.</span> 经理: 具有固定月薪的属性,工资计算方法为固定月薪</span><br><span class="line"><span class="number">4.</span> 销售经理: 工资计算方法为销售额 * 提成比例 + 固定月薪</span><br><span class="line">    </span><br><span class="line">    请根据以上要求设计合理的类,完成一下功能:</span><br><span class="line">        <span class="number">1.</span> 添加所有类型的人员</span><br><span class="line">        <span class="number">2.</span> 计算月薪</span><br><span class="line">        <span class="number">3.</span> 显示所有人工工资情况</span><br><span class="line">    </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">python 有多继承的特点</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li><li><p>多态</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p>单例模式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li></ul><ul><li><p>实现单例有几种模式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li></ul><h3 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h3><ul><li><p>模块的导入</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">在 python 中,模块是代码组织中的一种方式,把功能相近的函数或者类放到一个文件中,一个文件(.py)就是一个模块(model)</span><br><span class="line"></span><br><span class="line">模块名就是文件名去掉后缀 py，</span><br><span class="line"></span><br><span class="line">好处:</span><br><span class="line">    - 提高代码的可复用,可维护性,一个模块编写完毕后,可以很方便的在其他项目中导入</span><br><span class="line">    - 解决了命名冲突,不同模块中相同的命名不会冲突</span><br></pre></td></tr></table></figure></li><li><p>导入模块的方式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="keyword">import</span> 模块名(文件名 去除后缀)</span><br><span class="line"><span class="number">2.</span> <span class="keyword">from</span> name <span class="keyword">import</span> fun_name,变量名,类名</span><br><span class="line"><span class="number">3.</span> <span class="keyword">from</span> 模块名 <span class="keyword">import</span> * (该模块中的所有内容)</span><br><span class="line">   但是如果像限制获取的内容,可以在模块中使用 __all__ =[]</span><br><span class="line">    </span><br><span class="line">    注意: 无论是 <span class="keyword">import</span> 还是 <span class="keyword">from</span> 的形式,都会将模块内容进行加载</span><br><span class="line">        如果不希望其进行调用,就会用到 __name__</span><br><span class="line">        在自己的模块里面 __name__ 叫:  __main__</span><br><span class="line">        如果在其他模块中通过导入的方式调用的话叫: __name__ : 模块名</span><br><span class="line">        <span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">			<span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li><li><p>导包</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> 包名.模块名 <span class="keyword">import</span> 类名，变量名,函数名</span><br></pre></td></tr></table></figure></li><li><p><code>sys</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p><code>time</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">-----------------------------------  重点 -----------------------------</span><br><span class="line"><span class="comment"># 时间戳</span></span><br><span class="line">print(time.time())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 延迟</span></span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将元组的时间转成字符串</span></span><br><span class="line">s = time.strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>)</span><br><span class="line">print(s)</span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">t = time.time()</span><br><span class="line">print(t) <span class="comment"># 1609993679.9369621</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将时间戳转换成字符串</span></span><br><span class="line">print(time.ctime(t)) <span class="comment"># Thu Jan  7 12:27:59 2021</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将时间戳转换成元组</span></span><br><span class="line">t = time.localtime(t)</span><br><span class="line">print(t)</span><br><span class="line">print(t.tm_yday)</span><br><span class="line">print(t.tm_hour)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将元组的转换成时间戳</span></span><br><span class="line">print(time.mktime(t))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><code>random</code></p><ul><li><p>小数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="comment"># 随机小数</span></span><br><span class="line">  r = random.random()</span><br><span class="line">  print(r)</span><br></pre></td></tr></table></figure></li><li><p>前 10 位随机数，奇数位</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">前 <span class="number">10</span> 位随机数  <span class="comment"># 奇数 1--&gt; 起始值 10--&gt; 终点值 2--&gt; 步进值</span></span><br><span class="line">  ran = random.randrange(<span class="number">1</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">  print(ran)</span><br></pre></td></tr></table></figure></li><li><p>前 10 位随机数整数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 随机整数</span></span><br><span class="line">ran = random.randint(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line">print(ran)</span><br></pre></td></tr></table></figure></li><li><p>随机选择</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 随机选择</span></span><br><span class="line">list1 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>]</span><br><span class="line">ran = random.choice(list1)</span><br><span class="line">print(ran)</span><br></pre></td></tr></table></figure></li><li><p>打乱顺序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打乱顺序</span></span><br><span class="line">pai = [<span class="string">&#x27;红梅 A&#x27;</span>,<span class="string">&#x27;方片K&#x27;</span>,<span class="string">&#x27;黑2&#x27;</span>]</span><br><span class="line">ran = random.shuffle(pai)</span><br><span class="line">print(pai) <span class="comment"># 输出原列表</span></span><br></pre></td></tr></table></figure></li><li><p>小应用: 验证码功能</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 验证码案例</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fun</span>():</span></span><br><span class="line">      code = <span class="string">&#x27;&#x27;</span></span><br><span class="line">      <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">          <span class="comment"># 随机整数</span></span><br><span class="line">          ranNum = <span class="built_in">str</span>(random.randint(<span class="number">0</span>, <span class="number">9</span>))</span><br><span class="line">          <span class="comment"># A-Z</span></span><br><span class="line">          ranUpperStr = <span class="built_in">chr</span>(random.randint(<span class="number">65</span>, <span class="number">90</span>))</span><br><span class="line">          <span class="comment"># a-z</span></span><br><span class="line">          ranLowerStr = <span class="built_in">chr</span>(random.randint(<span class="number">97</span>, <span class="number">122</span>))</span><br><span class="line">          <span class="comment"># 存放大小写组合</span></span><br><span class="line">          ranList = [ranNum, ranUpperStr, ranLowerStr]</span><br><span class="line">          <span class="comment"># 随机选择</span></span><br><span class="line">          rChoice = random.choice(ranList)</span><br><span class="line">          <span class="comment"># 拼接得到最终组合</span></span><br><span class="line">          code += rChoice</span><br><span class="line">      <span class="keyword">return</span> code</span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 函数调用</span></span><br><span class="line">  code = fun()</span><br><span class="line">  <span class="comment"># 输出</span></span><br><span class="line">  print(code)</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>hashlib</code>加密模块</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">&#x27;--------------------- content: 2021-01-11 ------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加密算法</span></span><br><span class="line">print(<span class="string">&#x27;--------------------- Md5 ------------------------&#x27;</span>)</span><br><span class="line">pwd = <span class="string">&#x27;123456&#x27;</span></span><br><span class="line"><span class="comment"># md5 不可逆 --&gt; 单向</span></span><br><span class="line">md5 = hashlib.md5(pwd.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="comment"># 16 进制加密</span></span><br><span class="line">print(md5.hexdigest())  <span class="comment"># e10adc3949ba59abbe56e057f20f883e</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;------------------------- sha1 ----------------------------------&#x27;</span>)</span><br><span class="line">sha1 = hashlib.sha1(pwd.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="comment"># sha1 加密</span></span><br><span class="line">print(sha1.hexdigest())  <span class="comment"># 7c4a8d09ca3762af61e59520943dc26494f8941b</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;------------------------- sha256 ----------------------------------&#x27;</span>)</span><br><span class="line">sha256 = hashlib.sha256(pwd.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="comment"># sha1 加密</span></span><br><span class="line">print(sha256.hexdigest())  <span class="comment"># 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>小案例: 登录注册</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 登录注册</span></span><br><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;123456&#x27;</span></span><br><span class="line"><span class="comment"># encode</span></span><br><span class="line">str_en = hashlib.sha256(<span class="built_in">str</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="comment"># 加密</span></span><br><span class="line">str_pwd = str_en.hexdigest()</span><br><span class="line"></span><br><span class="line">str_list = []</span><br><span class="line">str_list.append(str_pwd)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用户输入密码加密之后进行对比</span></span><br><span class="line">user_input = <span class="built_in">input</span>(<span class="string">&#x27;请输入密码: &#x27;</span>)</span><br><span class="line">user_sha256 = hashlib.sha256(user_input.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">sha256_pwd = user_sha256.hexdigest()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> str_list:</span><br><span class="line">    <span class="keyword">if</span> sha256_pwd == i:</span><br><span class="line">        print(<span class="string">&#x27;登录成功!&#x27;</span>,i)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">&#x27;请重新输入···&#x27;</span>)  </span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>Unicode</code>之间的转换</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># chr  ord</span></span><br><span class="line">print(<span class="built_in">chr</span>(<span class="number">65</span>))  <span class="comment"># Unicode --&gt; str</span></span><br><span class="line">print(<span class="built_in">ord</span>(<span class="string">&#x27;A&#x27;</span>)) <span class="comment"># str --&gt; Unicode</span></span><br></pre></td></tr></table></figure></li><li><p>第三方<code>pillow</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pillow</span><br></pre></td></tr></table></figure></li></ul><h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><ul><li><p>正则表达式的定义</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">正则表达式是对字符串的一种逻辑公式,就是用事先定义好的一些特殊字符,以及这些特殊字符组成规则的字符串</span><br><span class="line">正则表达式是对字符串和特殊字符操作的一种逻辑公式</span><br></pre></td></tr></table></figure></li><li><p>正则表达式的作用和特点</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">给定一个正则表达式和另一个字符串,达到一定目的</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> 给定的字符串是否符合正则表达式的过滤逻辑(称作匹配)</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 可以通过正则表达式,从字符串中获取我们想要的特定部分</span><br><span class="line"></span><br><span class="line">正则表达式的特点是:</span><br><span class="line">    <span class="number">1.</span> 灵活性,逻辑性和功能性非常强</span><br><span class="line">    <span class="number">2.</span> 可以迅速的用极简单的方式达到字符串的复杂控制</span><br><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p>方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用正则 re 模块的方法: match 从头开始匹配,如果不成功则就返回 None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用正则 re 模块的方法: search  进行正则字符串匹配方法,匹配的是整个字符串 输出索引位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># group()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sub(’正则表达式‘,&#x27;新内容&#x27;,&#x27;替换&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># split() 切割</span></span><br></pre></td></tr></table></figure><ul><li><p><code>re.match</code>与<code>re.search</code>的区别</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">re.match 只匹配字符串的开始，如果字符串开始不符合正则表达式，则匹配失败，函数返回 <span class="literal">None</span>，</span><br><span class="line"></span><br><span class="line">re.search 匹配整个字符串，直到找到一个匹配。</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>检索和替换</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">re 模块提供了 re.sub 用于替换字符串中的匹配项</span><br><span class="line"></span><br><span class="line"><span class="comment"># 语法</span></span><br><span class="line">	</span><br><span class="line">    re.sub(pattern, repl, string, count=<span class="number">0</span>, flags=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    pattern : 正则中的模式字符串。</span><br><span class="line">    repl : 替换的字符串，也可为一个函数。</span><br><span class="line">    string : 要被查找替换的原始字符串。</span><br><span class="line">    count : 模式匹配后替换的最大次数，默认 <span class="number">0</span> 表示替换所有的匹配。</span><br><span class="line">    flags : 编译时用的匹配模式，数字形式。</span><br></pre></td></tr></table></figure></li><li><p><code>compile</code>函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">compile</span> 函数用于编译正则表达式，生成一个正则表达式（ Pattern ）对象，供 match() 和 search() 这两个函数使用。</span><br></pre></td></tr></table></figure></li><li><p><code>findall</code>:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在字符串中找到正则表达式所匹配的所有子串，并返回一个列表，如果没有找到匹配的，则返回空列表。</span><br><span class="line"></span><br><span class="line">注意: match 和 search 是匹配一次 findall 匹配所有。</span><br></pre></td></tr></table></figure></li><li><p><code>split</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">split 方法按照能够匹配的子串将字符串分割后返回列表</span><br></pre></td></tr></table></figure></li></ul></li><li><p>正则预定义</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">\A: 表示从字符串的开始处匹配</span><br><span class="line">\Z: 表示从字符串的结束处匹配，如果存在换行，只匹配到换行前的结束字符串。</span><br><span class="line">\b: 匹配-一个单词边界，也就是指单词和空格间的位置。例如，’py\<span class="string">b&#x27; 可以匹配’ python” 中的’ py’，但不能匹配”oenpyx1&quot;中的 &#x27;</span>py<span class="string">&#x27;</span></span><br><span class="line"><span class="string">\B: 匹配非单词边界。’ py\b’可以匹配”openpyx1&quot;中的’ py&#x27;</span>，但不能匹配”python<span class="string">&quot;中的’ py&#x27;</span></span><br><span class="line"><span class="string">\d: 匹配任意数字，等价于[0-9] 。</span></span><br><span class="line"><span class="string">\D: 匹配任意非数字字符，等价于[ \d]。</span></span><br><span class="line"><span class="string">\s: 匹配任意空白字符，等价于[\t\n\r\f] </span></span><br><span class="line"><span class="string">\S: 匹配任意非空白字符，等价于[^\s]。</span></span><br><span class="line"><span class="string">\w: 匹配任意字母数字及下划线，等价于[a-zA-Z0-9_ ] </span></span><br><span class="line"><span class="string">\W: 匹配任意非字母数字及下划线，等价于[^ \w]</span></span><br><span class="line"><span class="string">\\: 匹配原义的反斜杠\</span></span><br></pre></td></tr></table></figure></li><li><p>总结</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">. 任意字符除(\n)</span><br><span class="line">^ 开头</span><br><span class="line">$ 结尾</span><br><span class="line">[] 范围</span><br><span class="line"></span><br><span class="line">量词:</span><br><span class="line">    * &gt;= <span class="number">0</span></span><br><span class="line">    + &gt;= <span class="number">1</span></span><br><span class="line">	? 0,1</span><br><span class="line">    &#123;m&#125;  =m 位</span><br><span class="line">    &#123;m,&#125; &gt;=m</span><br><span class="line">    &#123;m,n&#125; phone&gt;=m  phone&lt;=n(范围内的大小)</span><br><span class="line">    </span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>起名</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">起名方式: (?P&lt;name&gt;正则)</span><br><span class="line">    </span><br><span class="line">分组: ()</span><br><span class="line">    </span><br><span class="line">    分组可以使用 group(n组) 获取</span><br></pre></td></tr></table></figure></li><li><p><code>group</code>小应用</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">path = <span class="string">&#x27;&#x27;&#x27;&lt;img data-original=&quot;http://browser9.qhimg.com/bdm/768_474_0/t010448c46c1ecf7cab.jpg&quot; alt=&quot;卡通人物 动漫卡通&quot; title=&quot;关键字：卡通人物 动漫卡通&quot; data-realurl=&quot;http://browser9.qhimg.com/bdr/__85/t010448c46c1ecf7cab.jpg&quot; src=&quot;http://browser9.qhimg.com/bdm/768_474_0/t010448c46c1ecf7cab.jpg&quot; style=&quot;display: inline;&quot;&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">result = re.match(<span class="string">r&#x27;&lt;img data-original=&quot;http://browser9.qhimg.com/bdm/768_474_0/t010448c46c1ecf7cab.jpg&quot; alt=&quot;卡通人物 动漫卡通&quot; title=&quot;关键字：卡通人物 动漫卡通&quot; data-realurl=&quot;http://browser9.qhimg.com/bdr/__85/t010448c46c1ecf7cab.jpg&quot; src=&quot;(.*?)&quot;&#x27;</span>,path)</span><br><span class="line">print(result.group(<span class="number">1</span>)) <span class="comment"># http://browser9.qhimg.com/bdm/768_474_0/t010448c46c1ecf7cab.jpg</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="进程（实现快速执行某任务-不论顺序）"><a href="#进程（实现快速执行某任务-不论顺序）" class="headerlink" title="进程（实现快速执行某任务,不论顺序）"></a>进程（实现快速执行某任务,不论顺序）</h3><ul><li><p>进程概念</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">进程是操作系统分配资源的最小单元···</span><br><span class="line"></span><br><span class="line">线程是操作系统调度的最小单元···</span><br></pre></td></tr></table></figure></li><li><p>创建进程</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task1</span>(<span class="params">timer, name</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        sleep(timer)</span><br><span class="line">        print(os.getpid(), <span class="string">&#x27;--------------------&gt; &#x27;</span>, os.getppid())</span><br><span class="line">        print(<span class="string">&#x27;&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(name))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task2</span>(<span class="params">timer, name</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        sleep(timer)</span><br><span class="line">        print(os.getpid(), <span class="string">&#x27;--------------------&gt; &#x27;</span>, os.getppid())</span><br><span class="line">        print(<span class="string">&#x27;&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(name))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    print(<span class="string">&#x27;主进程···········&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 子进程</span></span><br><span class="line">    p1 = Process(target=task1, args=(<span class="number">1</span>, <span class="string">&#x27;p1&#x27;</span>), name=<span class="string">&#x27;任务一&#x27;</span>)</span><br><span class="line">    print(p1.name)</span><br><span class="line">    p1.start()</span><br><span class="line"></span><br><span class="line">    p2 = Process(target=task2, args=(<span class="number">2</span>, <span class="string">&#x27;p2&#x27;</span>), name=<span class="string">&#x27;任务二&#x27;</span>)</span><br><span class="line">    print(p2.name)</span><br><span class="line">    p2.start()</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">总结:</span></span><br><span class="line"><span class="string">    process.start() 启动进程并执行任务</span></span><br><span class="line"><span class="string">    process.run() 只是执行了任务但没有启动进程</span></span><br><span class="line"><span class="string">    terminate() 终止</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">主进程:  <span class="comment"># (解释器的 run )</span></span><br><span class="line"> </span><br><span class="line">子进程: </span><br></pre></td></tr></table></figure></li><li><p>终止进程</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全局变量</span></span><br><span class="line"><span class="comment"># 进程练习源码 2021-01-11</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task1</span>(<span class="params">timer, name</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        sleep(timer)</span><br><span class="line">        print(os.getpid(), <span class="string">&#x27;--------------------&gt; &#x27;</span>, os.getppid())</span><br><span class="line">        print(<span class="string">&#x27;&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(name))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task2</span>(<span class="params">timer, name</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        sleep(timer)</span><br><span class="line">        print(os.getpid(), <span class="string">&#x27;--------------------&gt; &#x27;</span>, os.getppid())</span><br><span class="line">        print(<span class="string">&#x27;&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(name))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 全局变量</span></span><br><span class="line">number = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    print(<span class="string">&#x27;主进程···········&#x27;</span>, os.getpid())</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 子进程</span></span><br><span class="line">    p1 = Process(target=task1, args=(<span class="number">1</span>, <span class="string">&#x27;p1&#x27;</span>), name=<span class="string">&#x27;任务一&#x27;</span>)</span><br><span class="line">    print(p1.name)</span><br><span class="line">    p1.start()</span><br><span class="line"></span><br><span class="line">    p2 = Process(target=task2, args=(<span class="number">2</span>, <span class="string">&#x27;p2&#x27;</span>), name=<span class="string">&#x27;任务二&#x27;</span>)</span><br><span class="line">    print(p2.name)</span><br><span class="line">    p2.start()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        number += <span class="number">1</span></span><br><span class="line">        sleep(<span class="number">0.2</span>)</span><br><span class="line">        <span class="keyword">if</span> number == <span class="number">10</span>:</span><br><span class="line">            <span class="comment"># 终止进程</span></span><br><span class="line">            p1.terminate()</span><br><span class="line">            p2.terminate()</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">&#x27;number: &#x27;</span>, number)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>全局变量</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">多进程对于全局变量访问,在每一个全局变量里面都放一个 m 变量</span><br><span class="line"></span><br><span class="line">保证每个进程访问变量互不干扰</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>非阻塞式进程池</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    当需要创建的子进程数量不多时,可以直接利用 multiprocessing 中的 Process 动态生成多个进程</span></span><br><span class="line"><span class="string">    但如果是上百甚至上千个目标,手动的的去创建进程的工作量巨大,此时就可以用到 multiprocessing 模块提供的 Pool 方法</span></span><br><span class="line"><span class="string">    初始化 Pool 时,可以指定一个最大进程数,当有新的请求提交到 Pool 时,如果池还没有满,那么就会创建一个新的进程来执行该请求,但</span></span><br><span class="line"><span class="string">    如果池中的进程数已经达到指定的最大值,那么该请就就会等待,直到池中有进程结束,才会创建新的进程来执行</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    非阻塞式: 全部添加到队列中,立刻返回,并没有等待其他的进程完毕,但是回调函数是等待任务完成后才调用</span></span><br><span class="line"><span class="string">    阻塞式: 区别在 apply()  apply_async() </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进程池</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task_fun</span>(<span class="params">task_name</span>):</span></span><br><span class="line">    print(<span class="string">&#x27;任务开始啦·············&#x27;</span>, task_name, os.getpid())</span><br><span class="line">    <span class="comment"># 获取时间戳</span></span><br><span class="line">    start = time.time()</span><br><span class="line">    <span class="comment"># 使用 sleep</span></span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    end = time.time()</span><br><span class="line">    print(<span class="string">&#x27;用时: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(start - end))</span><br><span class="line">    <span class="comment"># 需要 return</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;用时: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(start - end)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">callback_fun</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="comment"># 必须添加参数</span></span><br><span class="line">    container_list.append(n)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">container_list = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 创建进程池 开启 5 个子进程</span></span><br><span class="line">    pool = Pool(<span class="number">5</span>)</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    源码,Pool 中的参数: </span></span><br><span class="line"><span class="string">    def Pool(processes: Optional[int] = ..., # 最大进程数 整数类型</span></span><br><span class="line"><span class="string">             initializer: Optional[Callable[..., Any]] = ...,</span></span><br><span class="line"><span class="string">             initargs: Iterable[Any] = ...,</span></span><br><span class="line"><span class="string">             maxtasksperchild: Optional[int] = ...) -&gt; pool.Pool: ...</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="built_in">list</span> = [<span class="string">&#x27;1a&#x27;</span>, <span class="string">&#x27;2a&#x27;</span>, <span class="string">&#x27;3a&#x27;</span>, <span class="string">&#x27;4a&#x27;</span>, <span class="string">&#x27;5a&#x27;</span>, <span class="string">&#x27;6a&#x27;</span>, <span class="string">&#x27;7a&#x27;</span>, <span class="string">&#x27;8a&#x27;</span>]</span><br><span class="line">    <span class="keyword">for</span> task <span class="keyword">in</span> <span class="built_in">list</span>:</span><br><span class="line">        <span class="comment"># 非阻塞式</span></span><br><span class="line">        pool.apply_async(task_fun, args=(task,), callback=callback_fun)</span><br><span class="line">    pool.close()  <span class="comment"># 添加任务结束</span></span><br><span class="line">    pool.join()  <span class="comment"># 堵住主进程 插队，不会执行后续 over,会等待 子进程执行完毕··········</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 主进程任务</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> container_list:</span><br><span class="line">        print(i)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>阻塞式进程池</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">特点: 添加一个执行一个任务,如果一个任务不结束另一个任务就进不来</span><br></pre></td></tr></table></figure></li><li><p>进程间的通信</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进程通信</span></span><br><span class="line"><span class="comment"># 通信是通过同一个 args=(参数1,···)</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Queue</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download</span>(<span class="params">q</span>):</span></span><br><span class="line">    imglist = [<span class="string">&#x27;a.jpg&#x27;</span>, <span class="string">&#x27;b.jpg&#x27;</span>, <span class="string">&#x27;c.jpg&#x27;</span>, <span class="string">&#x27;d.jpg&#x27;</span>, <span class="string">&#x27;e.jpg&#x27;</span>]</span><br><span class="line">    <span class="keyword">for</span> img <span class="keyword">in</span> imglist:</span><br><span class="line">        print(<span class="string">&#x27;正在下载: &#x27;</span>, img)</span><br><span class="line">        sleep(<span class="number">0.5</span>)</span><br><span class="line">        <span class="comment"># 放入</span></span><br><span class="line">        q.put(img)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getfile</span>(<span class="params">q</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 获取</span></span><br><span class="line">            file = q.get(timeout=<span class="number">5</span>)</span><br><span class="line">            print(<span class="string">&#x27;&#123;&#125; 保存成功&#x27;</span>.<span class="built_in">format</span>(file))</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            print(<span class="string">&#x27;全部保存完毕·········&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 通信桥梁</span></span><br><span class="line">    q = Queue(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">    down = Process(target=download, args=(q,))</span><br><span class="line">    gets = Process(target=getfile, args=(q,))</span><br><span class="line">    <span class="comment"># 创建进程</span></span><br><span class="line">    down.start()</span><br><span class="line">    <span class="comment"># down 阻塞</span></span><br><span class="line">    down.join()</span><br><span class="line"></span><br><span class="line">    gets.start()</span><br><span class="line">    gets.join()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h3 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h3><ul><li><p>线程的概念</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">线程: 有时被称为轻量进程(Lightweight Process LWP)，是程序执行流的最小单位。一个标准的线程由线程ID，当前指令指针(PC) 寄存器集合和堆栈组成,另外,线程是进程中的一个实体,是被系统独立调度和分排的基本单位，线程自己不拥有系统资源,只拥有一点儿在运行中必不可少的资源,但它可与同属一个进程的其他线程共享进程所拥有的全部资源.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">一个线程可以创建和撤销另一个线程,同一个进程中的多个线程之间可以并发执行。由于线程之间的相互制约,致使线程在运行中呈现出间断性。线程也有就绪，阻塞和运行三种基本状态。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">就绪状态: 是指线程具备运行的所有条件m逻辑上可以运行,在等待处理机；</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">运行状态: 是指线程占有处理机正在运行</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">阻塞状态: 阻塞状态是指线程在等待一个事件(如某个信号量),逻辑上不可执行。每一个程序都至少有一个线程，若程序只有一个线程,那就是程序本身。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>多线程</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">线程是程序中一个单一的顺序控制流程。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">程序内有一个相对独立的、可调度的执行单元.是系统独立调度和分派 CPU 的基本单位指令运行时的程序的调度单位。在单个程序中同时运行</span></span><br><span class="line"><span class="string">多个线程完成不同的工作称为多线程</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">多线程: 多线程(multithreading) 是指从软件或者硬件上实现多个线程并发执行的技术。具有多线程能力的计算机因有硬件支持而能够</span></span><br><span class="line"><span class="string">在同一时间执行多于一个线程,进而提升整体处理性能.具有这种能力的系统包括多对处理机,多核心处理器以及芯片级多处理或同时多线处理器。</span></span><br><span class="line"><span class="string">在一个程序中,这些独立运行的程序片段就做 &quot;线程&quot;，利用它的编程的概念就叫做&quot;多线程处理&quot;.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>优点</p><ul><li>使用线程可以把占据很长时间的程序中的任务放到后台去处理</li><li>用户界面可以更加吸引人,这样比如用户点击了一个按钮去触发某些事件的处理,可以弹出一个进度条<br>来显示用户处理的进度</li><li>程序的运行速度可能加快</li><li>在一些等待的任务实现上如用户输入，文件读写和网络收发数据等,线程就比较有用了.这种情况下我们可以释放一些<br>珍贵的资源如内存占用等等</li></ul></li><li><p>线程的状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">新建 就绪  运行  阻塞  结束</span><br></pre></td></tr></table></figure> <img src="https://cdn.jsdelivr.net/gh/lovobin/FileJsDeliver@v1.1.13/gif/3.gif" data-lazy-src="https://gitee.com/wang_hong_bin/repo-bin/raw/master/threadg.png"></li><li><p>全局解释器锁</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Global Interpreter Lock,缩写 GIL 是计算机程序设计语言解释器用于同步线程的一种机制，它使得任何时刻仅有一个线程在执行。即</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">便在多核心处理器上，使用 GIL 的解释器也只允许同一时间执行一个线程。常见的使用 GIL 的解释器有CPython与Ruby MRI。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">线程用于: 耗时操作,爬虫 IO</span><br><span class="line"></span><br><span class="line">进程用于: 计算密集型</span><br></pre></td></tr></table></figure></li><li><p>多线程同步</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">数据共享:</span><br><span class="line">    如果多个线程共同对某个数据修改，则可能出现不可预料的结果,为了保证数据的正确性,需要对多个线程进行同步</span><br><span class="line">    </span><br><span class="line">同步: 一个一个的完成,一个<span class="number">1</span>做完另一个才能进来</span><br><span class="line">    效率会降低</span><br><span class="line">    </span><br><span class="line">    使用 Thread 对象的 Lock 和 RLock 可以实现简单的线程同步,这个对象都有 acquire 方法 和 release方法,对于那些需要每次</span><br><span class="line">    只允许一个线程操作的数据,可以将其操作放在 acquire 和 release 方法之间</span><br><span class="line">    </span><br><span class="line">    多线程的优势在于可以同时运行多个任务。但是当线程需要共享数据时,可能存在数据不同步的问题,为了避免这种情况,引入锁的概念</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># 锁对象</span></span><br><span class="line">lock = threading.Lock()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可变类型</span></span><br><span class="line">list1 = [<span class="number">0</span>] * <span class="number">10</span>  <span class="comment"># [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># --------------------------------- S: 加锁任务 ----------------------------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task1</span>():</span></span><br><span class="line">    <span class="comment"># 获取线程锁,如果已经上锁,则等待锁的释放</span></span><br><span class="line">    lock.acquire()  <span class="comment"># 阻塞</span></span><br><span class="line">    <span class="comment"># 任务</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(list1)):</span><br><span class="line">        list1[i] = <span class="number">1</span></span><br><span class="line">        sleep(<span class="number">0.5</span>)</span><br><span class="line">    lock.release()  <span class="comment"># 释放锁</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task2</span>():</span></span><br><span class="line">    lock.acquire()  <span class="comment"># 阻塞</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(list1)):</span><br><span class="line">        print(<span class="string">&#x27;--------------&gt; &#x27;</span>, i)</span><br><span class="line">        sleep(<span class="number">0.5</span>)</span><br><span class="line">    lock.release()  <span class="comment"># 释放锁</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 创建线程</span></span><br><span class="line">    th1 = threading.Thread(target=task1)</span><br><span class="line">    th2 = threading.Thread(target=task2)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 开启线程</span></span><br><span class="line">    th2.start()</span><br><span class="line">    th1.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 阻塞</span></span><br><span class="line">    th2.join()</span><br><span class="line">    th1.join()</span><br><span class="line"></span><br><span class="line">    print(list1)</span><br><span class="line"><span class="comment"># --------------------------------- E: 加锁任务 ----------------------------------------------</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>死锁</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 死锁</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">  开发过程中，在线程间共享多个资源的时候,如果两个线程分别占有一部分资源并且同时等待对方的资源，就会造成死锁.</span></span><br><span class="line"><span class="string">  尽管死锁很少发生,但一旦发生就会造成应用的停止响应,程序不做任何事情</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  避免死锁</span></span><br><span class="line"><span class="string">  解决:</span></span><br><span class="line"><span class="string">      1. 重构代码</span></span><br><span class="line"><span class="string">      2. 使用 timeout 参数</span></span><br><span class="line"><span class="string">  &#x27;&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">from</span> threading <span class="keyword">import</span> Thread, Lock</span><br><span class="line">  <span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line"><span class="comment"># -------------------------------------------------------- S: 死锁 --------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 准备两把锁</span></span><br><span class="line"></span><br><span class="line">  lockA = Lock()</span><br><span class="line">  lockB = Lock()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment"># 自定义线程</span></span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">MyThreadA</span>(<span class="params">Thread</span>):</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span>  <span class="comment"># start()</span></span><br><span class="line">          <span class="comment">#  源码: def acquire(self, blocking: bool = ..., timeout: float = ...) -&gt; bool: ...</span></span><br><span class="line">          <span class="keyword">if</span> lockA.acquire():  <span class="comment"># 如果可以获取锁则返回 True (源码可知)</span></span><br><span class="line">              print(self.name + <span class="string">&#x27;拿到了A锁&#x27;</span>)</span><br><span class="line">              sleep(<span class="number">0.1</span>)</span><br><span class="line">              <span class="keyword">if</span> lockB.acquire():</span><br><span class="line">                  print(self.name + <span class="string">&#x27;又获取了B锁,原来还有A锁&#x27;</span>)</span><br><span class="line">                  lockB.release()  <span class="comment"># 释放 B 锁</span></span><br><span class="line">              lockA.release()  <span class="comment"># 释放 A 锁</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">MyThreadB</span>(<span class="params">Thread</span>):</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span>  <span class="comment"># start()</span></span><br><span class="line">          <span class="comment">#  源码: def acquire(self, blocking: bool = ..., timeout: float = ...) -&gt; bool: ...</span></span><br><span class="line">          <span class="keyword">if</span> lockB.acquire():  <span class="comment"># 如果可以获取锁则返回 True (源码可知)</span></span><br><span class="line">              print(self.name + <span class="string">&#x27;拿到了B锁&#x27;</span>)</span><br><span class="line">              sleep(<span class="number">0.1</span>)</span><br><span class="line">              <span class="keyword">if</span> lockA.acquire():</span><br><span class="line">                  print(self.name + <span class="string">&#x27;又获取了A锁,原来还有B锁&#x27;</span>)</span><br><span class="line">                  lockA.release()  <span class="comment"># 释放 B 锁</span></span><br><span class="line">              lockB.release()  <span class="comment"># 释放 A 锁</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">      th1 = MyThreadA()</span><br><span class="line">      th2 = MyThreadB()</span><br><span class="line">      th1.start()</span><br><span class="line">      th2.start()</span><br><span class="line">    </span><br><span class="line"><span class="comment"># -------------------------------------------------------- E: 死锁 --------------------------------------</span></span><br></pre></td></tr></table></figure> <img src="https://cdn.jsdelivr.net/gh/lovobin/FileJsDeliver@v1.1.13/gif/3.gif" data-lazy-src="https://gitee.com/wang_hong_bin/repo-bin/raw/master/dblock.png" width="400" height="120"></li><li><p>解决死锁</p> <img src="https://cdn.jsdelivr.net/gh/lovobin/FileJsDeliver@v1.1.13/gif/3.gif" data-lazy-src="https://gitee.com/wang_hong_bin/repo-bin/raw/master/reblock.png" width="600" height="300" alt="python 死锁 全局解释器锁"></li><li><p>生产者与消费者(线程之间的通信)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">生产者与消费者: 两个线程之间的通信</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">python 的 queue 模块中提供了同步的,包括 FIFO(先进先出)队列 Queue</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">LIFO(后入先出) 队列 LifoQueue 和优先级队列 PriorityQueue。这些队列都实现了锁原语(可以理解为原子操作，即要么不做,要么就全做),能够在多线程中直接使用</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">可以使用队列来实现线程间的同步</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> queue</span><br><span class="line">  <span class="keyword">import</span> threading</span><br><span class="line">  <span class="keyword">import</span> random</span><br><span class="line">  <span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">produce</span>(<span class="params">q</span>):</span></span><br><span class="line">      i = <span class="number">0</span></span><br><span class="line">      <span class="keyword">while</span> i &lt; <span class="number">10</span>:</span><br><span class="line">          num = random.randint(<span class="number">1</span>, <span class="number">100</span>)</span><br><span class="line">          q.put(<span class="string">&#x27;生产者产生的数据: %d&#x27;</span> % num)</span><br><span class="line">          print(<span class="string">&#x27;生产者产生的数据: %d&#x27;</span> % num)</span><br><span class="line">          sleep(<span class="number">1</span>)</span><br><span class="line">          i += <span class="number">1</span></span><br><span class="line">      q.put(<span class="literal">None</span>)</span><br><span class="line">      <span class="comment"># 完成任务</span></span><br><span class="line">      q.task_done()  <span class="comment"># task_done() 源码附有</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">consume</span>(<span class="params">q</span>):</span></span><br><span class="line">      <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">          item = q.get()</span><br><span class="line">          <span class="keyword">if</span> item <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">              <span class="keyword">break</span></span><br><span class="line">          print(<span class="string">&#x27;消费者获取到: %s&#x27;</span> % item)</span><br><span class="line">          sleep(<span class="number">4</span>)</span><br><span class="line">      <span class="comment"># 完成任务</span></span><br><span class="line">      q.task_done()</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">      q = queue.Queue(<span class="number">10</span>)</span><br><span class="line">      arr = []</span><br><span class="line">  </span><br><span class="line">      <span class="comment"># 创建生产者</span></span><br><span class="line">      th1 = threading.Thread(target=produce, args=(q,))</span><br><span class="line">      th1.start()</span><br><span class="line">  </span><br><span class="line">      <span class="comment"># 创建消费者</span></span><br><span class="line">      th2 = threading.Thread(target=consume, args=(q,))</span><br><span class="line">      th2.start()</span><br><span class="line">  </span><br><span class="line">      th1.join()</span><br><span class="line">      th2.join()</span><br><span class="line">  </span><br><span class="line">      print(<span class="string">&#x27;END···············&#x27;</span>)</span><br></pre></td></tr></table></figure> <img src="https://cdn.jsdelivr.net/gh/lovobin/FileJsDeliver@v1.1.13/gif/3.gif" data-lazy-src="https://gitee.com/wang_hong_bin/repo-bin/raw/master/Threadqueue.png" width="600" height="500" alt="线程 生产者与消费者 python"></li><li><p>数据共享总结</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">进程共享数据与线程共享数据的区别:</span><br><span class="line">    进程是每个进程中都有一份</span><br><span class="line">    线程是共同一个数据 --&gt; 数据安全问题</span><br><span class="line">    </span><br><span class="line">    GIL --&gt; 伪线程</span><br><span class="line">    </span><br></pre></td></tr></table></figure></li><li><p>协程</p><ul><li><p>使用生成器创建协程</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Coroutine 协程</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">协程: 耗时操作</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">耗时操作: 网络请求 网络下载(爬虫), IO：文件的读写 阻塞</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task1</span>():</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        print(<span class="string">&#x27;A&#x27;</span>+<span class="built_in">str</span>(i))</span><br><span class="line">        <span class="keyword">yield</span></span><br><span class="line">        sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task2</span>():</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        print(<span class="string">&#x27;B&#x27;</span> + <span class="built_in">str</span>(i))</span><br><span class="line">        <span class="keyword">yield</span></span><br><span class="line">        sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 生成器</span></span><br><span class="line">    t1 = task1()</span><br><span class="line">    t2 = task2()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="built_in">next</span>(t1)</span><br><span class="line">            <span class="built_in">next</span>(t2)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>第三方<code>greenlet</code>创建协程</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># greenlet</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入  anaconda 安装的 Scripts下</span></span><br><span class="line"></span><br><span class="line">  conda: conda install greenlet </span><br><span class="line"></span><br><span class="line">  windows: pip/pip3 install greenlet</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> greenlet <span class="keyword">import</span> greenlet</span><br><span class="line"> <span class="keyword">import</span> time</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">a</span>():</span></span><br><span class="line">     <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">         print(<span class="string">&#x27;A&#x27;</span> + <span class="built_in">str</span>(i))</span><br><span class="line">         gb.switch()</span><br><span class="line">         time.sleep(<span class="number">0.1</span>)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">b</span>():</span></span><br><span class="line">     <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">         print(<span class="string">&#x27;B&#x27;</span> + <span class="built_in">str</span>(i))</span><br><span class="line">         gc.switch()</span><br><span class="line">         time.sleep(<span class="number">0.2</span>)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">c</span>():</span></span><br><span class="line">     <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">         print(<span class="string">&#x27;C&#x27;</span> + <span class="built_in">str</span>(i))</span><br><span class="line">         ga.switch()</span><br><span class="line">         time.sleep(<span class="number">0.3</span>)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"> <span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">     ga = greenlet(a)</span><br><span class="line">     gb = greenlet(b)</span><br><span class="line">     gc = greenlet(c)</span><br><span class="line">     <span class="comment"># 需要调一下</span></span><br><span class="line">     ga.switch()</span><br><span class="line">    </span><br><span class="line"> <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string"> 结果输出: A0 B0 C0 A1 B1 C1 A2 B2 C2 A3 B3 C3 A4 B4 C4</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string"> 交替输出</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string"> &#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>第三方<code>gevent</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">	  conda解释器安装 gevent:</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    conda install gevent</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    成功后显示:  All requested packages already installed.</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">    全局解释器安装: pip/pip3 install gevent</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"> </span><br><span class="line">greenlet已经实现了协程，但是这个人工切换，是不是觉得太麻烦了，python 还有一个比 greenlet 更强大的并且能够自动切换任务的模块`gevent`,其原理是当一个 greentlet 遇到 IO（指的是<span class="built_in">input</span> ouput输入输出，比如网络、文件操作等）操作时，比如访问网络，就自动切换到其他的greenlet,等到 IO 完成，再适当的时候切换回来继续执行。</span><br><span class="line"></span><br><span class="line">由于IO操作非常耗时，经常使程序处于等待状态，有了gevent我们自动切换协程，就保证总有greenlet在运行，而不是等待IO</span><br><span class="line">  </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">  <span class="keyword">from</span> greenlet <span class="keyword">import</span> greenlet</span><br><span class="line">  <span class="keyword">import</span> gevent</span><br><span class="line">  <span class="keyword">import</span> time</span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 猴子补丁</span></span><br><span class="line">  <span class="keyword">from</span> gevent <span class="keyword">import</span> monkey</span><br><span class="line">  monkey.patch_all()</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">a</span>():</span></span><br><span class="line">      <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">          print(<span class="string">&#x27;A&#x27;</span> + <span class="built_in">str</span>(i))</span><br><span class="line">          time.sleep(<span class="number">0.1</span>)</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">b</span>():</span></span><br><span class="line">      <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">          print(<span class="string">&#x27;B&#x27;</span> + <span class="built_in">str</span>(i))</span><br><span class="line">          time.sleep(<span class="number">0.2</span>)</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">c</span>():</span></span><br><span class="line">      <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">          print(<span class="string">&#x27;C&#x27;</span> + <span class="built_in">str</span>(i))</span><br><span class="line">          time.sleep(<span class="number">0.3</span>)</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">      g1 = gevent.spawn(a)</span><br><span class="line">      g2 = gevent.spawn(b)</span><br><span class="line">      g3 = gevent.spawn(c)</span><br><span class="line">  </span><br><span class="line">      g1.join()</span><br><span class="line">      g2.join()</span><br><span class="line">      g3.join()</span><br><span class="line">  </span><br><span class="line">  <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">  没有猴子补丁的输出: A0 A1 A2 A3 A4 B0 B1 B2 B3 B4 C0 C1 C2 C3 C4</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">  添加猴子补丁后输出: A0 B0 C0 A1 B1 A2 C1 A3 B2 A4 B3 C2 B4 C3 C4 # 实现协程</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><ul><li><p><font color="red">实现协程小应用</font></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 协程案例</span></span><br><span class="line"><span class="keyword">import</span> urllib  <span class="comment"># 错误</span></span><br><span class="line"><span class="keyword">import</span> gevent</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">erro: 由于暂时不了解爬虫,错误无法排除 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">date: 2021.01.13 13:40:31 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">python: 完结 python 基础学习</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 猴子补丁</span></span><br><span class="line"><span class="keyword">from</span> gevent <span class="keyword">import</span> monkey</span><br><span class="line"></span><br><span class="line">monkey.patch_all()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">downUrl</span>(<span class="params">url</span>):</span></span><br><span class="line">    response = urllib.request.urlopen(url)</span><br><span class="line">    content = response.read()</span><br><span class="line">    print(<span class="string">&#x27;下载了&#123;&#125; 的数据,长度是:&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(url, <span class="built_in">len</span>(content)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    urls = [<span class="string">&#x27;http://www.163.com&#x27;</span>, <span class="string">&#x27;http://www.qq.com&#x27;</span>, <span class="string">&#x27;http://www.baidu.com&#x27;</span>]</span><br><span class="line">    g1 = gevent.spawn(downUrl, urls[<span class="number">0</span>])</span><br><span class="line">    g2 = gevent.spawn(downUrl, urls[<span class="number">1</span>])</span><br><span class="line">    g3 = gevent.spawn(downUrl, urls[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">    g1.join()</span><br><span class="line">    g2.join()</span><br><span class="line">    g3.join()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="PYMYSQL模块"><a href="#PYMYSQL模块" class="headerlink" title="PYMYSQL模块"></a>PYMYSQL模块</h3><ul><li><p>查询</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输入相应参数</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    conn = pymysql.connect(host = <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">                           port = <span class="number">3306</span>,</span><br><span class="line">                           user = <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">                           passwd = <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">                           db = <span class="string">&#x27;student&#x27;</span>,</span><br><span class="line">                           charset = <span class="string">&#x27;utf8&#x27;</span>,</span><br><span class="line">                           cursorclass = pymysql.cursors.DictCursor)  <span class="comment"># 修改类型 元组类型需要去除该参数</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 获取游标对象</span></span><br><span class="line">        <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            <span class="comment"># 执行 sql 注意参数位置</span></span><br><span class="line">            cursor.execute(<span class="string">&#x27;select eno,ename,sal from tb_emp&#x27;</span>)</span><br><span class="line">            <span class="comment"># 元组类型结果集</span></span><br><span class="line">            <span class="comment"># for row in cursor.fetchall():</span></span><br><span class="line">            <span class="comment">#     print(&#x27;&#x27;&#x27;</span></span><br><span class="line">            <span class="comment">#     ----------- 查询所有 -------</span></span><br><span class="line">            <span class="comment">#     eno: &#123;&#125;</span></span><br><span class="line">            <span class="comment">#     ename: &#123;&#125;</span></span><br><span class="line">            <span class="comment">#     sal: &#123;&#125;</span></span><br><span class="line">            <span class="comment">#     -------------------------</span></span><br><span class="line">            <span class="comment">#</span></span><br><span class="line">            <span class="comment">#     &#x27;&#x27;&#x27;.format(row[0], row[1], row[2]))</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># 字典类型结果集 如果查询时带别名, 那么字典的键要更改为 别名</span></span><br><span class="line">            <span class="keyword">for</span> row <span class="keyword">in</span> cursor.fetchall():</span><br><span class="line">                <span class="comment"># print(row)</span></span><br><span class="line">                print(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">                -------------------------</span></span><br><span class="line"><span class="string">                eno: &#123;&#125;</span></span><br><span class="line"><span class="string">                ename: &#123;&#125;</span></span><br><span class="line"><span class="string">                sal: &#123;&#125;</span></span><br><span class="line"><span class="string">                --------------------------</span></span><br><span class="line"><span class="string">                &#x27;&#x27;&#x27;</span>.<span class="built_in">format</span>(row[<span class="string">&#x27;eno&#x27;</span>], row[<span class="string">&#x27;ename&#x27;</span>], row[<span class="string">&#x27;sal&#x27;</span>]))</span><br><span class="line">    <span class="keyword">except</span> pymysql.MySQLError <span class="keyword">as</span> erro:</span><br><span class="line">        print(erro)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="comment"># 关闭连接释放资源</span></span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>添加</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pymysql 的使用</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成文件 pip freeze &gt; requirements.txt</span></span><br><span class="line"><span class="comment"># 依赖项安装: pip install -r requirements.txt</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    conn = pymysql.connect(host = <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">                           port = <span class="number">3306</span>,</span><br><span class="line">                           user = <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">                           password = <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">                           db = <span class="string">&#x27;student&#x27;</span>,</span><br><span class="line">                           charset = <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 获得游标对象</span></span><br><span class="line">        <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            <span class="comment"># execute 执行</span></span><br><span class="line">            result = cursor.execute(<span class="string">&#x27;insert into tb_emp values(1001,&quot;张三&quot;,4500)&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> result == <span class="number">1</span>:</span><br><span class="line">                print(<span class="string">&#x27;添加成功&#x27;</span>)</span><br><span class="line">                <span class="comment"># commit() 很重要 否则看不到响应结果</span></span><br><span class="line">                conn.commit()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(<span class="string">&#x27;添加失败，操作已经回滚···&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> pymysql.MySQLError <span class="keyword">as</span> error:</span><br><span class="line">        print(e)</span><br><span class="line">        conn.rollback()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    a = main()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>删除</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输入相应参数</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    conn = pymysql.connect(host = <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">                           port = <span class="number">3306</span>,</span><br><span class="line">                           user = <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">                           passwd = <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">                           db = <span class="string">&#x27;student&#x27;</span>,</span><br><span class="line">                           charset = <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    eno = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入要删除的员工编号: &#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 获取游标对象</span></span><br><span class="line">        <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            <span class="comment"># 执行 sql</span></span><br><span class="line">            result = cursor.execute(<span class="string">&#x27;delete from tb_emp where eno=%s&#x27;</span>, (eno,))</span><br><span class="line">            <span class="keyword">if</span> result == <span class="number">1</span>:</span><br><span class="line">                print(<span class="string">&#x27;删除数据成功···&#x27;</span>)</span><br><span class="line">                conn.commit()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(<span class="string">&#x27;删除数据失败,操作已经回滚····&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> pymysql.MySQLError <span class="keyword">as</span> erro:</span><br><span class="line">        print(erro)</span><br><span class="line">        <span class="comment"># 回滚</span></span><br><span class="line">        conn.rollback()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="comment"># 关闭连接释放资源</span></span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>更新</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输入相应参数</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    conn = pymysql.connect(host = <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">                           port = <span class="number">3306</span>,</span><br><span class="line">                           user = <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">                           passwd = <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">                           db = <span class="string">&#x27;student&#x27;</span>,</span><br><span class="line">                           charset = <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="comment"># 输入内容</span></span><br><span class="line">    oldeno = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入原编号: &#x27;</span>))</span><br><span class="line">    neweno = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;请输入新编号: &#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 获取游标对象</span></span><br><span class="line">        <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            <span class="comment"># 执行 sql 注意参数位置</span></span><br><span class="line">            result = cursor.execute(<span class="string">&#x27;update tb_emp set eno = %s where eno = %s&#x27;</span>, (neweno, oldeno))</span><br><span class="line">            <span class="keyword">if</span> result == <span class="number">1</span>:</span><br><span class="line">                print(<span class="string">&#x27;更新数据成功···&#x27;</span>)</span><br><span class="line">                conn.commit()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(<span class="string">&#x27;更新数据失败,操作已经回滚····&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> pymysql.MySQLError <span class="keyword">as</span> erro:</span><br><span class="line">        print(erro)</span><br><span class="line">        <span class="comment"># 回滚</span></span><br><span class="line">        conn.rollback()</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="comment"># 关闭连接释放资源</span></span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="mailto:undefined">源于此</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://lovobin.github.io/2021/01/03/Python-%E5%9F%BA%E7%A1%80/">https://lovobin.github.io/2021/01/03/Python-%E5%9F%BA%E7%A1%80/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://lovobin.github.io" target="_blank">源于此</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a><a class="post-meta__tags" href="/tags/Python-%E5%9F%BA%E7%A1%80/">Python-基础</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.6/bbg/09.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/01/06/JSON-%E5%BA%8F%E5%88%97%E5%8C%96/"><img class="prev-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.4/re-4.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JSON-序列化</div></div></a></div><div class="next-post pull-right"><a href="/2021/01/03/%E9%93%BE%E6%8E%A5%E7%9B%B4%E8%BE%BE/"><img class="next-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.4/re-16.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">链接直达</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i> <span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/10/20/通过python-封装git命令快速提交/" title="通过python 封装git命令快速提交"><img class="cover" data-lazy-src="https://gitee.com/wang_hong_bin/pic-go-photos/raw/master/python.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-20</div><div class="title">通过python 封装git命令快速提交</div></div></a></div><div><a href="/2021/01/06/JSON-序列化/" title="JSON-序列化"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.4/re-4.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-06</div><div class="title">JSON-序列化</div></div></a></div><div><a href="/2021/01/13/Linux-Install-Python3/" title="Linux-Install-Python3"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.5/bg/18.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-13</div><div class="title">Linux-Install-Python3</div></div></a></div><div><a href="/2021/01/12/Pycharm-Settings/" title="Pycharm-Settings"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.5/bg/14.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-12</div><div class="title">Pycharm-Settings</div></div></a></div><div><a href="/2021/01/11/Python-Anaconda安装与使用/" title="Python-Anaconda安装与使用"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.6/bbg/34.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-11</div><div class="title">Python-Anaconda安装与使用</div></div></a></div><div><a href="/2021/01/12/Python-Re在线练习/" title="Python-Re在线练习"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/lovobin/Access@v1.0/medias/featureimages/4.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-12</div><div class="title">Python-Re在线练习</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="https://gitee.com/wang_hong_bin/pic-go-photos/raw/master/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"><div class="author-info__name">源于此</div><div class="author-info__description">专注于分享</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">121</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">64</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">27</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/lovobin"><i class="fab fa-github"></i><span>源于此</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content"><p><a target="_blank" rel="noopener" href="http://wang_hong_bin.gitee.io/hexoblog/"><img src="https://img.shields.io/badge/Theme-Matery-red"></a></p><p><a target="_blank" rel="noopener" href="http://aidou.3vfree.com/"><img src="https://img.shields.io/badge/Gitee-Gitee--Matery-red"></a></p><a target="_blank" rel="noopener" href="https://learnmore.vercel.app/"><img src="https://img.shields.io/badge/Gitee-Vercel-red"></a><p></p><p>请勿尝试破解本站未知密码,渗透测试!</p></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Python-%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">Python-基础</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA-format"><span class="toc-number">1.1.</span> <span class="toc-text">1. 格式化输出 format</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-s"><span class="toc-number">1.2.</span> <span class="toc-text">2. %s</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-input%E8%BE%93%E5%85%A5"><span class="toc-number">1.3.</span> <span class="toc-text">3. input输入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.4.</span> <span class="toc-text">4. 进制转换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E4%B8%89%E7%9B%AE%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.5.</span> <span class="toc-text">5. 三目运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-if-%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.6.</span> <span class="toc-text">6. if 语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-for-%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.7.</span> <span class="toc-text">7. for 循环</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-for-else%E7%BB%93%E6%9E%84"><span class="toc-number">1.8.</span> <span class="toc-text">8. for else结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-while%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.9.</span> <span class="toc-text">9. while循环</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.10.</span> <span class="toc-text">10. 字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E5%88%97%E8%A1%A8"><span class="toc-number">1.11.</span> <span class="toc-text">11. 列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E5%85%83%E7%BB%84"><span class="toc-number">1.12.</span> <span class="toc-text">12 . 元组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-%E5%AD%97%E5%85%B8"><span class="toc-number">1.13.</span> <span class="toc-text">13. 字典</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-%E9%9B%86%E5%90%88"><span class="toc-number">1.14.</span> <span class="toc-text">14. 集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-%E5%87%BD%E6%95%B0"><span class="toc-number">1.15.</span> <span class="toc-text">15. 函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-%E9%97%AD%E5%8C%85"><span class="toc-number">1.16.</span> <span class="toc-text">16. 闭包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-%E8%A3%85%E9%A5%B0%E5%99%A8-%E9%87%8D%E7%82%B9"><span class="toc-number">1.17.</span> <span class="toc-text">17. 装饰器(重点)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="toc-number">1.18.</span> <span class="toc-text">18. 匿名函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">2.</span> <span class="toc-text">文件操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6"><span class="toc-number">3.</span> <span class="toc-text">异常机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AF%BC%E5%BC%8F-128%E9%9B%86"><span class="toc-number">4.</span> <span class="toc-text">列表推导式(128集)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">5.</span> <span class="toc-text">生成器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.</span> <span class="toc-text">面向对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97"><span class="toc-number">7.</span> <span class="toc-text">模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">8.</span> <span class="toc-text">正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%EF%BC%88%E5%AE%9E%E7%8E%B0%E5%BF%AB%E9%80%9F%E6%89%A7%E8%A1%8C%E6%9F%90%E4%BB%BB%E5%8A%A1-%E4%B8%8D%E8%AE%BA%E9%A1%BA%E5%BA%8F%EF%BC%89"><span class="toc-number">9.</span> <span class="toc-text">进程（实现快速执行某任务,不论顺序）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B"><span class="toc-number">10.</span> <span class="toc-text">线程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PYMYSQL%E6%A8%A1%E5%9D%97"><span class="toc-number">11.</span> <span class="toc-text">PYMYSQL模块</span></a></li></ol></div></div><div class="card-widget card-clock"><div id="clock"><img v-if="clockshow == &quot;false&quot;" alt="" src="/assets/weather/loading.gif" height="120px" width="100%"><table class="clock" v-if="clockshow"><tbody><tr><td class="clockdate">{{date}}</td><td class="weatherimg"><img id="weatherimg" :src="weatherimg" alt=""></td><td class="temperature">{{temperature}}</td><td class="humidityimg"><img id="humidityimg" :src="humidityimg" alt=""></td><td class="humidity">{{humidity}}</td></tr><tr class="time"><td colspan="5">{{time}}</td></tr><tr><td class="usaqi" colspan="1"><span>{{ip}}</span></td><td class="city" colspan="2">{{city}}</td><td class="daylight" colspan="2">{{daylight}}</td></tr></tbody></table></div></div><script defer="defer" data-pjax="data-pjax" src="https://cdn.jsdelivr.net/gh/lovobin/Access@b1.0/card_clock.js"></script><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/03/16/%E8%8B%B1%E8%AF%AD%E5%AD%A6%E4%B9%A0/" title="英语学习"><img data-lazy-src="https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.4/re-15.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="英语学习"></a><div class="content"><a class="title" href="/2021/03/16/%E8%8B%B1%E8%AF%AD%E5%AD%A6%E4%B9%A0/" title="英语学习">英语学习</a><time datetime="2021-03-16T19:15:39.000Z" title="发表于 2021-03-16 19:15:39">2021-03-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/03/16/Hexo-%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E9%85%8D%E7%BD%AE/" title="Hexo-后台管理配置"><img data-lazy-src="https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.6/bbg/26.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Hexo-后台管理配置"></a><div class="content"><a class="title" href="/2021/03/16/Hexo-%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E9%85%8D%E7%BD%AE/" title="Hexo-后台管理配置">Hexo-后台管理配置</a><time datetime="2021-03-16T14:29:14.000Z" title="发表于 2021-03-16 14:29:14">2021-03-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/03/11/Github-Actions-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%80%BB%E7%BB%93/" title="Github-Actions-自动化部署总结"><img data-lazy-src="https://cdn.jsdelivr.net/gh/lovobin/Access@v1.0/medias/featureimages/20.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Github-Actions-自动化部署总结"></a><div class="content"><a class="title" href="/2021/03/11/Github-Actions-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%80%BB%E7%BB%93/" title="Github-Actions-自动化部署总结">Github-Actions-自动化部署总结</a><time datetime="2021-03-11T22:20:00.000Z" title="发表于 2021-03-11 22:20:00">2021-03-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/02/25/%E7%BC%96%E5%86%99%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/" title="编写接口文档"><img data-lazy-src="https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.6/bbg/34.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="编写接口文档"></a><div class="content"><a class="title" href="/2021/02/25/%E7%BC%96%E5%86%99%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/" title="编写接口文档">编写接口文档</a><time datetime="2021-02-25T17:28:05.000Z" title="发表于 2021-02-25 17:28:05">2021-02-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/02/18/Bootstrap-%E6%A1%86%E6%9E%B6/" title="Bootstrap-框架"><img data-lazy-src="https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.6/bbg/28.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Bootstrap-框架"></a><div class="content"><a class="title" href="/2021/02/18/Bootstrap-%E6%A1%86%E6%9E%B6/" title="Bootstrap-框架">Bootstrap-框架</a><time datetime="2021-02-18T11:35:16.000Z" title="发表于 2021-02-18 11:35:16">2021-02-18</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(https://cdn.jsdelivr.net/gh/lovobin/hiddenContent@v1.0.6/bbg/09.jpg)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By 源于此</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><p><img src="https://img.shields.io/badge/Frame-Hexo-orange">&nbsp;<img src="https://img.shields.io/badge/Theme-Buffterfly-blue">&nbsp;<img src="https://img.shields.io/badge/CDN-jsDeliver-blueviolet">&nbsp;<img src="https://img.shields.io/badge/Source-Github-9cf">&nbsp;<img src="https://img.shields.io/badge/Theme-Matery-ff69b4">&nbsp;<img src="https://img.shields.io/badge/Python-Python-success">&nbsp;<img src="https://img.shields.io/badge/Python-Flask-red"></p><p><img src="https://img.shields.io/badge/Theme-Butterfly-red?logo=Castorama&logoWidth=18">&nbsp;<img src="https://img.shields.io/badge/Frame-Hexo-blue?logo=Grunt&logoWidth=18"></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script src="https://cdn.jsdelivr.net/gh/lovobin/Access@b1.0/utils.js"></script><script src="https://cdn.jsdelivr.net/gh/lovobin/Access@b1.0/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/gh/lovobin/Access@b1.0/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'mBJmPXWzwyV04mxhgYDlcesh-MdYXbMMI',
      appKey: 'YmiNUWFhvvnoxmwyOo4iAEUy',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign(initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script defer="defer" src="https://cdn.jsdelivr.net/npm/hexo-theme-volantis@latest/source/js/issues.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/lovobin/FileJsDeliver@v1.1.13/swiper/swiper.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/lovobin/FileJsDeliver@v1.1.13/swiper/swiperindex.js"></script><script src="https://cdn.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/lovobin/Live2d@v1.0/live2d-widget/autoload.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  if (typeof gtag === 'function') {
    gtag('config', '', {'page_path': window.location.pathname});
  }

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.js"></script><script data-pjax>function GithubCalendarConfig(){var t=document.getElementById("recent-posts");t&&"/"==location.pathname&&(console.log("已挂载github calendar"),t.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>')),GithubCalendar("https://python-github-calendar-api.vercel.app/api?lovobin",["#ebedf0","#fdcdec","#fc9bd9","#fa6ac5","#f838b2","#f5089f","#c4067e","#92055e","#540336","#48022f","#30021f"],"lovobin")}document.getElementById("recent-posts")&&GithubCalendarConfig()</script><style>#github_container{min-height:280px}@media screen and (max-width:650px){#github_container{min-height:0}}</style><style></style></body></html>